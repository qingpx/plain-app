import{_ as ss}from"./VPagination.vuevuetypescriptsetuptruelang-DVcMfZIb.js";import{_ as os,u as as,a as is}from"./key-events-CQ-FwgxI.js";import{e as Y,c,K as p,o as i,a as r,d as ns,t as h,m as We,u as pe,L as v,j as B,Z as R,M as me,l as t,G as Xe,z as m,q as u,k as l,a8 as Je,aN as Ye,aO as Ve,ak as Ze,aP as ie,aQ as ne,aR as xe,b6 as ls,N as et,ai as ds,O as le,b2 as Re,aH as Ue,n as ze,a9 as Ne,Q as rs,R as us,H as Qe,S as He,i as de,b7 as ps,b8 as ms,s as re,g as tt,a5 as F,aT as st,F as ue,r as V,b9 as ys,f as cs,T as gs,am as Oe,an as vs,U as fs,V as hs,aS as ks,aU as _s,ao as Is,W as bs,aV as $s,aW as Ts,X as ws,Y as Fs,p as Ps,ah as Cs,aq as As,$ as ae,a0 as Ss,ax as Ls,ba as Es,ap as Ds,aw as Ms,a_ as qs,B as Ge,bb as Ke,a2 as Bs,a3 as Vs,b0 as je,a4 as Rs,J as Us}from"./index-Bp0_GVkJ.js";import{_ as zs}from"./ListItemPhone.vuevuetypescriptsetuptruelang-fNs6xOvG.js";import{_ as Ns}from"./FieldId.vuevuetypescriptsetuptruelang-z5zLBg8r.js";import{_ as ot}from"./VCheckbox-CejFhKfX.js";import{_ as Qs,a as Hs,b as Os}from"./SearchInput-BwqbnwTE.js";import{_ as Gs,a as Ks}from"./upload-rounded-Cu1Ez8RC.js";import{_ as js}from"./MediaKeyboardShortcuts.vuevuetypescriptsetuptruelang-CVOoG8CZ.js";import{u as Ws}from"./search-CULCZbLY.js";import{a as Xs}from"./tags-ZKHYEoy5.js";import"./search-rounded-Ba8OlWxO.js";const Js={key:0,class:"media-item selectable-card-skeleton"},Ys={class:"start"},Zs={class:"number"},xs=Y({__name:"AudioSkeletonItem",props:{index:{},isPhone:{type:Boolean}},setup(C){return(e,s)=>{const n=os;return e.isPhone?(i(),p(n,{key:1,"title-width":"70%",subtitles:[{width:"45%"},{width:"40%"},{width:"50%"}],"action-count":4})):(i(),c("section",Js,[r("div",Ys,[s[0]||(s[0]=r("div",{class:"skeleton-checkbox"},null,-1)),r("span",Zs,h(e.index),1)]),s[1]||(s[1]=ns('<div class="image"><div class="skeleton-image lg"></div></div><div class="title"><div class="skeleton-text lg" style="width:40%;"></div></div><div class="subtitle"><div class="skeleton-text" style="width:30%;"></div></div><div class="actions"><div class="skeleton-text lg" style="width:140px;"></div></div><div class="artist"><div class="skeleton-text" style="width:60px;"></div></div><div class="time"><div class="skeleton-text" style="width:60px;"></div></div>',6))]))}}}),eo={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function to(C,e){return i(),c("svg",eo,e[0]||(e[0]=[r("path",{fill:"currentColor",d:"M10 16q.425 0 .713-.288T11 15V9q0-.425-.288-.712T10 8t-.712.288T9 9v6q0 .425.288.713T10 16m4 0q.425 0 .713-.288T15 15V9q0-.425-.288-.712T14 8t-.712.288T13 9v6q0 .425.288.713T14 16m-2 6q-2.075 0-3.9-.788t-3.175-2.137T2.788 15.9T2 12t.788-3.9t2.137-3.175T8.1 2.788T12 2t3.9.788t3.175 2.137T21.213 8.1T22 12t-.788 3.9t-2.137 3.175t-3.175 2.138T12 22m0-2q3.35 0 5.675-2.325T20 12t-2.325-5.675T12 4T6.325 6.325T4 12t2.325 5.675T12 20m0-8"},null,-1)]))}const so=We({name:"material-symbols-pause-circle-outline-rounded",render:to}),oo={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function ao(C,e){return i(),c("svg",oo,e[0]||(e[0]=[r("path",{fill:"currentColor",d:"M3 16v-2h7v2zm0-4v-2h11v2zm0-4V6h11v2zm13 12v-4h-4v-2h4v-4h2v4h4v2h-4v4z"},null,-1)]))}const at=We({name:"material-symbols-playlist-add",render:ao}),io={class:"actions"},no=Y({__name:"AudioActionButtons",props:{item:{},filter:{},dataType:{},animatingIds:{},playLoading:{type:Boolean},playPath:{},app:{},deleteItem:{type:Function},restore:{type:Function},downloadFile:{type:Function},trash:{type:Function},handleRemoveFromPlaylist:{type:Function},addToPlaylist:{type:Function},addItemToTags:{type:Function},pause:{type:Function},isAudioPlaying:{type:Function},isInPlaylist:{type:Function},restoreLoading:{type:Function},trashLoading:{type:Function}},setup(C){const{t:e}=pe();return(s,n)=>{const _=Je,f=Xe,U=Ye,z=Ze,I=xe,$=ls,y=at,N=et,w=ds,T=so,g=me("tooltip");return i(),c("div",io,[s.filter.trash?(i(),c(R,{key:0},[v((i(),p(f,{class:"sm",onClick:n[0]||(n[0]=m(k=>s.deleteItem(s.dataType,s.item),["stop"]))},{default:u(()=>[l(_)]),_:1})),[[g,t(e)("delete")]]),v((i(),p(f,{class:"sm",loading:s.restoreLoading(`ids:${s.item.id}`),onClick:n[1]||(n[1]=m(k=>s.restore(s.dataType,`ids:${s.item.id}`),["stop"]))},{default:u(()=>[l(U)]),_:1},8,["loading"])),[[g,t(e)("restore")]]),v((i(),p(f,{class:"sm",onClick:n[2]||(n[2]=m(k=>s.downloadFile(s.item.path,t(Ve)(s.item.path).replace(" ","-")),["stop"]))},{default:u(()=>[l(z)]),_:1})),[[g,t(e)("download")]])],64)):(i(),c(R,{key:1},[t(ie)(t(ne).MEDIA_TRASH,s.app.osVersion)?v((i(),p(f,{key:0,class:"sm",loading:s.trashLoading(`ids:${s.item.id}`),onClick:n[3]||(n[3]=m(k=>s.trash(s.dataType,`ids:${s.item.id}`),["stop"]))},{default:u(()=>[l(I)]),_:1},8,["loading"])),[[g,t(e)("move_to_trash")]]):v((i(),p(f,{key:1,class:"sm",onClick:n[4]||(n[4]=m(k=>s.deleteItem(s.dataType,s.item),["stop"]))},{default:u(()=>[l(_)]),_:1})),[[g,t(e)("delete")]]),v((i(),p(f,{class:"sm",onClick:n[5]||(n[5]=m(k=>s.downloadFile(s.item.path,t(Ve)(s.item.path).replace(" ","-")),["stop"]))},{default:u(()=>[l(z)]),_:1})),[[g,t(e)("download")]]),s.isInPlaylist(s.item)&&!s.animatingIds.includes(s.item.id)?v((i(),p(f,{key:2,class:"sm",onClick:n[6]||(n[6]=m(k=>s.handleRemoveFromPlaylist(k,s.item),["stop","prevent"]))},{default:u(()=>[l($,{class:"playlist-remove-icon"})]),_:1})),[[g,t(e)("remove_from_playlist")]]):s.isInPlaylist(s.item)&&s.animatingIds.includes(s.item.id)?(i(),p(f,{key:3,class:"sm",disabled:!0},{default:u(()=>[l($,{class:"playlist-remove-icon rotating"})]),_:1})):!s.isInPlaylist(s.item)&&!s.animatingIds.includes(s.item.id)?v((i(),p(f,{key:4,class:"sm",onClick:n[7]||(n[7]=m(k=>s.addToPlaylist(k,s.item),["stop","prevent"]))},{default:u(()=>[l(y,{class:"playlist-add-icon"})]),_:1})),[[g,t(e)("add_to_playlist")]]):!s.isInPlaylist(s.item)&&s.animatingIds.includes(s.item.id)?(i(),p(f,{key:5,class:"sm",disabled:!0},{default:u(()=>[l(y,{class:"playlist-add-icon rotating"})]),_:1})):B("",!0),v((i(),p(f,{class:"sm",onClick:n[8]||(n[8]=m(k=>s.addItemToTags(s.item),["stop"]))},{default:u(()=>[l(N)]),_:1})),[[g,t(e)("add_to_tags")]])],64)),s.playLoading&&s.item.path===s.playPath?(i(),p(w,{key:2,indeterminate:"",class:"sm"})):s.isAudioPlaying(s.item)?v((i(),p(f,{key:3,class:"sm",onClick:n[9]||(n[9]=m(k=>s.pause(),["stop"]))},{default:u(()=>[l(T)]),_:1})),[[g,t(e)("pause")]]):B("",!0)])}}}),lo={class:"start"},ro={class:"number"},uo={class:"image"},po=["src"],mo=["src"],yo={class:"title"},co={class:"subtitle"},go={class:"duration"},vo={class:"artist"},fo={class:"time"},ho={class:"image"},ko=["src"],_o=["src"],Io={class:"subtitle"},bo={class:"duration"},$o={key:0,class:"subtitle"},To={class:"subtitle"},wo={key:0,class:"artist"},Fo={class:"time"},Po=Y({__name:"AudioListItem",props:{item:{},index:{},selectedIds:{},shiftEffectingIds:{},shouldSelect:{type:Boolean},isPhone:{type:Boolean},imageErrorIds:{},bucketsMap:{},filter:{},dataType:{},animatingIds:{},playLoading:{type:Boolean},playPath:{},mainStore:{},app:{},handleItemClick:{type:Function},handleMouseOver:{type:Function},toggleSelect:{type:Function},onImageError:{type:Function},viewBucket:{type:Function},deleteItem:{type:Function},restore:{type:Function},downloadFile:{type:Function},trash:{type:Function},handleRemoveFromPlaylist:{type:Function},addToPlaylist:{type:Function},addItemToTags:{type:Function},play:{type:Function},pause:{type:Function},isAudioPlaying:{type:Function},isInPlaylist:{type:Function},restoreLoading:{type:Function},trashLoading:{type:Function}},setup(C){return(e,s)=>{var $;const n=ot,_=Ns,f=rs,U=no,z=zs,I=me("tooltip");return e.isPhone?(i(),p(z,{key:1,"is-selected":e.selectedIds.includes(e.item.id),"is-selecting":e.shiftEffectingIds.includes(e.item.id),"checkbox-checked":e.shiftEffectingIds.includes(e.item.id)?e.shouldSelect:e.selectedIds.includes(e.item.id),onClick:s[8]||(s[8]=y=>e.handleItemClick(y,e.item,e.index,()=>e.play(e.item))),onMouseover:s[9]||(s[9]=y=>e.handleMouseOver(y,e.index)),onCheckboxClick:s[10]||(s[10]=y=>e.toggleSelect(y,e.item,e.index))},{image:u(()=>[r("div",ho,[e.imageErrorIds.includes(e.item.id)?(i(),c("img",{key:0,src:`/ficons/${t(Re)(e.item.path)}.svg`,class:"svg"},null,8,ko)):(i(),c("img",{key:1,class:"image-thumb",src:t(Ue)(e.item.albumFileId,"&w=200&h=200"),onError:s[6]||(s[6]=y=>e.onImageError(e.item.id))},null,40,_o))])]),title:u(()=>[Qe(h(e.item.title),1)]),subtitle:u(()=>{var y;return[r("div",Io,[r("span",null,h(t(ze)(e.item.size)),1),r("span",bo,h(t(Ne)(e.item.duration)),1)]),e.bucketsMap[e.item.bucketId]||e.item.tags.length>0?(i(),c("div",$o,[r("a",{onClick:s[7]||(s[7]=m(N=>e.viewBucket(e.mainStore,e.item.bucketId),["stop","prevent"]))},h((y=e.bucketsMap[e.item.bucketId])==null?void 0:y.name),1),l(f,{tags:e.item.tags,type:e.dataType,"only-links":!0},null,8,["tags","type"])])):B("",!0),r("div",To,[e.item.artist?(i(),c("span",wo,h(e.item.artist),1)):B("",!0),r("span",Fo,h(t(He)(e.item.createdAt)),1)])]}),actions:u(()=>[l(U,{item:e.item,filter:e.filter,"data-type":e.dataType,"animating-ids":e.animatingIds,"play-loading":e.playLoading,"play-path":e.playPath,app:e.app,"delete-item":e.deleteItem,restore:e.restore,"download-file":e.downloadFile,trash:e.trash,"handle-remove-from-playlist":e.handleRemoveFromPlaylist,"add-to-playlist":e.addToPlaylist,"add-item-to-tags":e.addItemToTags,pause:e.pause,"is-audio-playing":e.isAudioPlaying,"is-in-playlist":e.isInPlaylist,"restore-loading":e.restoreLoading,"trash-loading":e.trashLoading},null,8,["item","filter","data-type","animating-ids","play-loading","play-path","app","delete-item","restore","download-file","trash","handle-remove-from-playlist","add-to-playlist","add-item-to-tags","pause","is-audio-playing","is-in-playlist","restore-loading","trash-loading"])]),_:1},8,["is-selected","is-selecting","checkbox-checked"])):(i(),c("section",{key:0,class:le(["media-item selectable-card",{selected:e.selectedIds.includes(e.item.id),selecting:e.shiftEffectingIds.includes(e.item.id)}]),onClick:s[4]||(s[4]=m(y=>e.handleItemClick(y,e.item,e.index,()=>e.play(e.item)),["stop"])),onMouseover:s[5]||(s[5]=y=>e.handleMouseOver(y,e.index))},[r("div",lo,[e.shiftEffectingIds.includes(e.item.id)?(i(),p(n,{key:0,class:"checkbox","touch-target":"wrapper",checked:e.shouldSelect,onClick:s[0]||(s[0]=m(y=>e.toggleSelect(y,e.item,e.index),["stop"]))},null,8,["checked"])):(i(),p(n,{key:1,class:"checkbox","touch-target":"wrapper",checked:e.selectedIds.includes(e.item.id),onClick:s[1]||(s[1]=m(y=>e.toggleSelect(y,e.item,e.index),["stop"]))},null,8,["checked"])),r("span",ro,[l(_,{id:e.index+1,raw:e.item},null,8,["id","raw"])])]),r("div",uo,[e.imageErrorIds.includes(e.item.id)?(i(),c("img",{key:0,src:`/ficons/${t(Re)(e.item.path)}.svg`,class:"svg"},null,8,po)):(i(),c("img",{key:1,class:"image-thumb",src:t(Ue)(e.item.albumFileId,"&w=200&h=200"),onError:s[2]||(s[2]=y=>e.onImageError(e.item.id))},null,40,mo))]),r("div",yo,h(e.item.title),1),r("div",co,[r("span",null,h(t(ze)(e.item.size)),1),r("span",go,h(t(Ne)(e.item.duration)),1),r("a",{onClick:s[3]||(s[3]=m(y=>e.viewBucket(e.mainStore,e.item.bucketId),["stop","prevent"]))},h(($=e.bucketsMap[e.item.bucketId])==null?void 0:$.name),1),l(f,{tags:e.item.tags,type:e.dataType,"only-links":!0},null,8,["tags","type"])]),l(U,{item:e.item,filter:e.filter,"data-type":e.dataType,"animating-ids":e.animatingIds,"play-loading":e.playLoading,"play-path":e.playPath,app:e.app,"delete-item":e.deleteItem,restore:e.restore,"download-file":e.downloadFile,trash:e.trash,"handle-remove-from-playlist":e.handleRemoveFromPlaylist,"add-to-playlist":e.addToPlaylist,"add-item-to-tags":e.addItemToTags,pause:e.pause,"is-audio-playing":e.isAudioPlaying,"is-in-playlist":e.isInPlaylist,"restore-loading":e.restoreLoading,"trash-loading":e.trashLoading},null,8,["item","filter","data-type","animating-ids","play-loading","play-path","app","delete-item","restore","download-file","trash","handle-remove-from-playlist","add-to-playlist","add-item-to-tags","pause","is-audio-playing","is-in-playlist","restore-loading","trash-loading"]),r("div",vo,h(e.item.artist),1),r("div",fo,[v((i(),c("span",null,[Qe(h(t(He)(e.item.createdAt)),1)])),[[I,t(us)(e.item.createdAt)]])])],34))}}}),Co=(C,e)=>{const{mutate:s,loading:n,onDone:_}=de({document:ps}),{mutate:f,loading:U,onDone:z}=de({document:ms}),{app:I}=re(tt()),{t:$}=pe();_(()=>{F.emit("refetch_app"),e()}),z(()=>{F.emit("refetch_app")});const y=st(()=>{var w;return((w=I.value)==null?void 0:w.audios)??[]}),N=w=>y.value.some(T=>T.path===w.path);return{loading:n,removeLoading:U,isInPlaylist:N,addItemsToPlaylist:(w,T,g,k)=>{let A=k;if(!g){if(T.length===0){ue($("select_first"),"error");return}A=`ids:${T.join(",")}`}s({query:A})},removeItemsFromPlaylist:(w,T,g,k)=>{if(g)C.value.filter(A=>N(A)).forEach(A=>{f({path:A.path})});else{if(T.length===0){ue($("select_first"),"error");return}C.value.filter(Q=>T.includes(Q.id)&&N(Q)).forEach(Q=>{f({path:Q.path})})}},addToPlaylist:(w,T)=>{s({query:`ids:${T.id}`})},removeFromPlaylist:(w,T)=>{f({path:T.path})}}},Ao=()=>{const C=V(""),{mutate:e,loading:s,onDone:n}=de({document:ys});return n(()=>{F.emit("play_audio")}),{loading:s,playPath:C,play:_=>{C.value=_.path,e({path:_.path})},pause:()=>{F.emit("pause_audio")}}},So={class:"top-app-bar"},Lo={class:"title"},Eo={key:0},Do={key:1},Mo={key:0,class:"actions"},qo=["onClick"],Bo={key:0,class:"no-data-placeholder"},O=50,Vo=Y({__name:"AudiosView",setup(C){var De;const e=Ps("isPhone"),s=cs(),{audioSortBy:n}=re(s),_=V([]),{t:f}=pe(),{parseQ:U,buildQ:z}=Ws(),I=gs({tagIds:[],bucketId:void 0}),{app:$,urlTokenKey:y,audioPlaying:N,uploads:w}=re(tt()),T=o=>{var a;return N.value&&((a=$.value)==null?void 0:a.audioCurrent)===o.path},g=V([]),k=V(!1),A=V(!1),{input:Q,upload:it,uploadChanged:ye}=Oe(w),{input:nt,upload:lt,uploadChanged:ce}=Oe(w),{dropping:dt,fileDragEnter:ge,fileDragLeave:ve,dropFiles:rt}=vs(w),Z=V(!1),b=fs.AUDIO,fe=hs(),he=fe.query,x=V(parseInt(((De=he.page)==null?void 0:De.toString())??"1")),{tags:G,buckets:K,fetch:ut}=ks(b),pt=st(()=>{const o={};return K.value.forEach(a=>{o[a.id]=a}),o}),S=V(""),{addToTags:mt}=Xs(b,G),{deleteItems:ee,deleteItem:yt}=_s(),{view:ct}=qs(b),{selectedIds:L,allChecked:ke,realAllChecked:E,selectRealAll:gt,allCheckedAlertVisible:vt,clearSelection:H,toggleAllChecked:ft,toggleSelect:ht,total:D,checked:X,shiftEffectingIds:kt,handleItemClick:_t,handleMouseOver:It,selectAll:bt,shouldSelect:$t}=as(_),{downloadItems:_e}=Is(y,b,H,()=>Ls("audios")),{downloadFile:Tt}=Ms(y),Ie=o=>{const a=fe.query.q;Ge(s,a?`/audios?page=${o}&q=${a}`:`/audios?page=${o}`)},{keyDown:be,keyUp:$e}=is(D,O,x,bt,H,Ie,()=>{ie(ne.MEDIA_TRASH,$.value.osVersion)?se(b,W()):ee(b,L.value,E.value,D.value,S.value)}),{addItemsToPlaylist:wt,addToPlaylist:Ft,removeFromPlaylist:Pt,isInPlaylist:Ct}=Co(_,H),At=Ds(),Te=V([]),{play:St,playPath:Lt,loading:Et,pause:Dt}=Ao(),Mt=o=>{Te.value.push(o)},{loading:te,fetch:j}=bs({handle:(o,a)=>{Z.value=!1,a?ue(f(a),"error"):o&&(_.value=o.items,D.value=o.total)},document:Es,variables:()=>({offset:(x.value-1)*O,limit:O,query:S.value,sortBy:n.value})}),{trashLoading:we,trash:se}=$s(),{restoreLoading:Fe,restore:Pe}=Ts();function Ce(o){return o?`/audios?q=${o}`:"/audios"}function qt(o){n.value!==o&&(Z.value=!0,n.value=o)}function oe(){const o=K.value.find(a=>a.id===I.bucketId);return o?je(o.topItems[0]):`${$.value.internalStoragePath}/Music`}function Bt(){it(oe())}function Vt(){lt(oe())}function Rt(o){rt(o,oe(),a=>Ke(a.name))}const W=()=>{let o=S.value;return E.value||(o=`ids:${L.value.join(",")}`),o},Ae=o=>{o.type===b&&(H(),j())},Se=o=>{o.type===b&&j()},Le=o=>{o.type===b&&(H(),j())},Ee=o=>{o.status==="done"&&Ke(o.fileName)&&((!I.bucketId||K.value.some(P=>P.id===I.bucketId&&P.topItems.some(J=>o.dir.startsWith(je(J)))))&&setTimeout(()=>{j()},1e3),F.emit("media_items_actioned",{type:b,action:"upload",query:""}))};function Ut(o){const a=o.tags.map(P=>P.id);Bs(Vs,{type:b,tags:G.value,item:{key:o.id,title:o.title,size:o.size},selected:G.value.filter(P=>a.includes(P.id))})}function zt(o,a){g.value.push(a.id),setTimeout(()=>{Pt(o,a),setTimeout(()=>{g.value=g.value.filter(P=>P!==a.id)},200)},150)}function Nt(o,a){g.value.push(a.id),setTimeout(()=>{Ft(o,a),setTimeout(()=>{g.value=g.value.filter(P=>P!==a.id)},200)},150)}function Qt(o){Object.assign(I,o),Ge(s,Ce(z(I)))}return ws(()=>{var o;S.value=Rs(((o=he.q)==null?void 0:o.toString())??""),U(I,S.value),ut(),j(),F.on("item_tags_updated",Se),F.on("items_tags_updated",Ae),F.on("media_items_actioned",Le),F.on("upload_task_done",Ee),window.addEventListener("keydown",be),window.addEventListener("keyup",$e)}),Fs(()=>{F.off("item_tags_updated",Se),F.off("items_tags_updated",Ae),F.off("media_items_actioned",Le),F.off("upload_task_done",Ee),window.removeEventListener("keydown",be),window.removeEventListener("keyup",$e)}),(o,a)=>{const P=ot,J=Je,M=Xe,Ht=Ye,Me=Ze,Ot=xe,Gt=at,Kt=et,jt=Qs,Wt=js,Xt=Gs,qe=Cs,Jt=Ks,Yt=Os,Zt=Hs,xt=Po,es=xs,ts=ss,q=me("tooltip");return i(),c(R,null,[r("div",So,[l(P,{"touch-target":"wrapper",checked:t(ke),indeterminate:!t(ke)&&t(X),onChange:t(ft)},null,8,["checked","indeterminate","onChange"]),r("div",Lo,[t(L).length?(i(),c("span",Eo,h(o.$t("x_selected",{count:t(E)?t(D).toLocaleString():t(L).length.toLocaleString()})),1)):(i(),c("span",Do,h(o.$t("page_title.audios"))+" ("+h(t(D).toLocaleString())+")",1)),t(X)?(i(),c(R,{key:2},[I.trash?(i(),c(R,{key:0},[v((i(),p(M,{onClick:a[0]||(a[0]=m(d=>t(ee)(t(b),t(L),t(E),t(D),S.value),["stop"]))},{default:u(()=>[l(J)]),_:1})),[[q,o.$t("delete")]]),v((i(),p(M,{loading:t(Fe)(W()),onClick:a[1]||(a[1]=m(d=>t(Pe)(t(b),W()),["stop"]))},{default:u(()=>[l(Ht)]),_:1},8,["loading"])),[[q,o.$t("restore")]]),v((i(),p(M,{onClick:a[2]||(a[2]=m(d=>t(_e)(t(E),t(L),S.value),["stop"]))},{default:u(()=>[l(Me)]),_:1})),[[q,o.$t("download")]])],64)):(i(),c(R,{key:1},[t(ie)(t(ne).MEDIA_TRASH,t($).osVersion)?v((i(),p(M,{key:0,loading:t(we)(W()),onClick:a[3]||(a[3]=m(d=>t(se)(t(b),W()),["stop"]))},{default:u(()=>[l(Ot)]),_:1},8,["loading"])),[[q,o.$t("move_to_trash")]]):v((i(),p(M,{key:1,onClick:a[4]||(a[4]=m(d=>t(ee)(t(b),t(L),t(E),t(D),S.value),["stop"]))},{default:u(()=>[l(J)]),_:1})),[[q,o.$t("delete")]]),v((i(),p(M,{onClick:a[5]||(a[5]=m(d=>t(_e)(t(E),t(L),S.value),["stop"]))},{default:u(()=>[l(Me)]),_:1})),[[q,o.$t("download")]]),v((i(),p(M,{onClick:a[6]||(a[6]=m(d=>t(wt)(d,t(L),t(E),S.value),["stop"]))},{default:u(()=>[l(Gt)]),_:1})),[[q,o.$t("add_to_playlist")]]),v((i(),p(M,{onClick:a[7]||(a[7]=m(d=>t(mt)(t(L),t(E),S.value),["stop"]))},{default:u(()=>[l(Kt)]),_:1})),[[q,o.$t("add_to_tags")]])],64))],64)):B("",!0)]),!t(e)||!t(X)?(i(),c("div",Mo,[l(jt,{filter:I,tags:t(G),buckets:t(K),"get-url":Ce,"show-chips":!t(e),"is-phone":t(e)},null,8,["filter","tags","buckets","show-chips","is-phone"]),l(Wt),l(qe,{modelValue:k.value,"onUpdate:modelValue":a[10]||(a[10]=d=>k.value=d)},{trigger:u(()=>[v((i(),p(M,null,{default:u(()=>[l(Xt)]),_:1})),[[q,o.$t("upload")]])]),default:u(()=>[r("div",{class:"dropdown-item",onClick:a[8]||(a[8]=m(d=>{Bt(),k.value=!1},["stop"]))},h(o.$t("upload_files")),1),r("div",{class:"dropdown-item",onClick:a[9]||(a[9]=m(d=>{Vt(),k.value=!1},["stop"]))},h(o.$t("upload_folder")),1)]),_:1},8,["modelValue"]),l(qe,{modelValue:A.value,"onUpdate:modelValue":a[11]||(a[11]=d=>A.value=d)},{trigger:u(()=>[v((i(),p(M,{loading:Z.value},{default:u(()=>[l(Jt)]),_:1},8,["loading"])),[[q,o.$t("sort")]])]),default:u(()=>[(i(!0),c(R,null,ae(t(At),d=>(i(),c("div",{key:d.value,class:le(["dropdown-item",{selected:d.value===t(n)}]),onClick:Be=>{qt(d.value),A.value=!1}},h(o.$t(d.label)),11,qo))),128))]),_:1},8,["modelValue"])])):B("",!0)]),t(e)?(i(),p(Yt,{key:0,class:"mobile-search-filters",filter:I,tags:t(G),feeds:[],buckets:t(K),types:[],onFilterChange:Qt},null,8,["filter","tags","buckets"])):B("",!0),l(Zt,{limit:O,total:t(D),"all-checked-alert-visible":t(vt),"real-all-checked":t(E),"select-real-all":t(gt),"clear-selection":t(H)},null,8,["total","all-checked-alert-visible","real-all-checked","select-real-all","clear-selection"]),r("div",{class:"scroll-content",onDragover:a[15]||(a[15]=m((...d)=>t(ge)&&t(ge)(...d),["stop","prevent"]))},[v(r("div",{class:"drag-mask",onDrop:m(Rt,["stop","prevent"]),onDragleave:a[12]||(a[12]=m((...d)=>t(ve)&&t(ve)(...d),["stop","prevent"]))},h(o.$t("release_to_send_files")),545),[[As,t(dt)]]),r("div",{class:le(["main-list",{"select-mode":t(X)}])},[(i(!0),c(R,null,ae(_.value,(d,Be)=>(i(),p(xt,{key:d.id,item:d,index:Be,"is-phone":t(e),"selected-ids":t(L),"shift-effecting-ids":t(kt),"should-select":t($t),"image-error-ids":Te.value,"buckets-map":pt.value,filter:I,"data-type":t(b),"animating-ids":g.value,"play-loading":t(Et),"play-path":t(Lt),"main-store":t(s),app:t($),"handle-item-click":t(_t),"handle-mouse-over":t(It),"toggle-select":t(ht),"on-image-error":Mt,"view-bucket":t(ct),"delete-item":t(yt),restore:t(Pe),"download-file":t(Tt),trash:t(se),"handle-remove-from-playlist":zt,"add-to-playlist":Nt,"add-item-to-tags":Ut,play:t(St),pause:t(Dt),"is-audio-playing":T,"is-in-playlist":t(Ct),"restore-loading":t(Fe),"trash-loading":t(we)},null,8,["item","index","is-phone","selected-ids","shift-effecting-ids","should-select","image-error-ids","buckets-map","filter","data-type","animating-ids","play-loading","play-path","main-store","app","handle-item-click","handle-mouse-over","toggle-select","view-bucket","delete-item","restore","download-file","trash","play","pause","is-in-playlist","restore-loading","trash-loading"]))),128)),t(te)&&_.value.length===0?(i(),c(R,{key:0},ae(20,d=>l(es,{key:d,index:d,"is-phone":t(e)},null,8,["index","is-phone"])),64)):B("",!0)],2),!t(te)&&_.value.length===0?(i(),c("div",Bo,h(o.$t(t(Ss)(t(te),t($).permissions,"WRITE_EXTERNAL_STORAGE"))),1)):B("",!0),t(D)>O?(i(),p(ts,{key:1,page:x.value,go:Ie,total:t(D),limit:O},null,8,["page","total"])):B("",!0),r("input",{ref_key:"fileInput",ref:Q,style:{display:"none"},type:"file",accept:"audio/*",multiple:"",onChange:a[13]||(a[13]=(...d)=>t(ye)&&t(ye)(...d))},null,544),r("input",{ref_key:"dirFileInput",ref:nt,style:{display:"none"},type:"file",accept:"audio/*",multiple:"",webkitdirectory:"",mozdirectory:"",directory:"",onChange:a[14]||(a[14]=(...d)=>t(ce)&&t(ce)(...d))},null,544)],32)],64)}}}),Jo=Us(Vo,[["__scopeId","data-v-2e55b176"]]);export{Jo as default};
