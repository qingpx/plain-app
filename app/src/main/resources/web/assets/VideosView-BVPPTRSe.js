import{_ as Wt}from"./VPagination.vuevuetypescriptsetuptruelang-xYxQ_SZD.js";import{_ as Zt,a as Gt,b as Xt,c as Yt}from"./ViewToggleButtons.vuevuetypescriptsetuptruelang-aWeq7SMZ.js";import{_ as Jt}from"./ListItemPhone.vuevuetypescriptsetuptruelang-CWNaKFsN.js";import{e as $e,u as it,c as m,o as s,Z as C,L as c,M as be,l as e,K as l,G as lt,z as d,q as u,k as r,a8 as dt,aN as rt,aO as q,ak as ut,aP as ee,aQ as te,aR as pt,N as mt,O as P,a as g,b2 as _e,aH as oe,t as _,n as ye,a9 as he,Q as ct,R as xt,H as Je,S as xe,f as eo,s as et,r as z,T as to,g as oo,am as tt,an as so,U as no,V as ao,aS as io,aT as ot,aU as lo,ao as ro,W as uo,aV as po,aW as mo,X as co,Y as go,j as V,p as vo,ah as ko,aq as fo,$ as x,a0 as _o,ax as yo,b3 as ho,F as $o,aY as bo,ap as wo,aZ as Co,aw as Io,a_ as To,B as st,a2 as Fo,a3 as So,b4 as nt,b0 as at,a4 as Eo,a5 as M}from"./index-CjV_XHt1.js";import{_ as Vo}from"./FieldId.vuevuetypescriptsetuptruelang-CbUX_J17.js";import{_ as gt}from"./VCheckbox-DkV6kTpI.js";import{_ as Do,a as Lo,b as Ao}from"./SearchInput-CtRHr6H9.js";import{_ as Mo,a as Bo}from"./upload-rounded-3I9l3kUM.js";import{_ as Uo}from"./MediaKeyboardShortcuts.vuevuetypescriptsetuptruelang-De-cgbKS.js";import{a as Ro}from"./tags-B45UHHaj.js";import{u as zo,a as qo}from"./key-events-DKZNx6TT.js";import{u as Ho}from"./search-BjrQXfOk.js";import"./search-rounded-BLibehjB.js";const No={class:"actions"},Po=$e({__name:"VideoActionButtons",props:{item:{},filter:{},dataType:{},app:{},deleteItem:{type:Function},restore:{type:Function},downloadFile:{type:Function},trash:{type:Function},addItemToTags:{type:Function},restoreLoading:{type:Function},trashLoading:{type:Function}},setup(we){const{t}=it();return(a,v)=>{const b=dt,I=lt,H=rt,N=ut,$=pt,U=mt,p=be("tooltip");return s(),m("div",No,[a.filter.trash?(s(),m(C,{key:0},[c((s(),l(I,{class:"sm",onClick:v[0]||(v[0]=d(T=>a.deleteItem(a.dataType,a.item),["stop"]))},{default:u(()=>[r(b)]),_:1})),[[p,e(t)("delete")]]),c((s(),l(I,{class:"sm",loading:a.restoreLoading(`ids:${a.item.id}`),onClick:v[1]||(v[1]=d(T=>a.restore(a.dataType,`ids:${a.item.id}`),["stop"]))},{default:u(()=>[r(H)]),_:1},8,["loading"])),[[p,e(t)("restore")]]),c((s(),l(I,{class:"sm",onClick:v[2]||(v[2]=d(T=>a.downloadFile(a.item.path,e(q)(a.item.path).replace(" ","-")),["stop"]))},{default:u(()=>[r(N)]),_:1})),[[p,e(t)("download")]])],64)):(s(),m(C,{key:1},[e(ee)(e(te).MEDIA_TRASH,a.app.osVersion)?c((s(),l(I,{key:0,class:"sm",loading:a.trashLoading(`ids:${a.item.id}`),onClick:v[3]||(v[3]=d(T=>a.trash(a.dataType,`ids:${a.item.id}`),["stop"]))},{default:u(()=>[r($)]),_:1},8,["loading"])),[[p,e(t)("move_to_trash")]]):c((s(),l(I,{key:1,class:"sm",onClick:v[4]||(v[4]=d(T=>a.deleteItem(a.dataType,a.item),["stop"]))},{default:u(()=>[r(b)]),_:1})),[[p,e(t)("delete")]]),c((s(),l(I,{class:"sm",onClick:v[5]||(v[5]=d(T=>a.downloadFile(a.item.path,e(q)(a.item.path).replace(" ","-")),["stop"]))},{default:u(()=>[r(N)]),_:1})),[[p,e(t)("download")]]),c((s(),l(I,{class:"sm",onClick:v[6]||(v[6]=d(T=>a.addItemToTags(a.item),["stop"]))},{default:u(()=>[r(U)]),_:1})),[[p,e(t)("add_to_tags")]])],64))])}}}),Oo={class:"start"},Qo={class:"number"},Ko={class:"image"},jo=["src"],Wo=["src"],Zo={class:"title"},Go={class:"subtitle"},Xo={class:"time"},Yo={class:"image"},Jo=["src"],xo=["src"],es={class:"subtitle"},ts={class:"subtitle"},os=$e({__name:"VideoListItem",props:{item:{},index:{},selectedIds:{},shiftEffectingIds:{},shouldSelect:{type:Boolean},isPhone:{type:Boolean},imageErrorIds:{},bucketsMap:{},filter:{},dataType:{},mainStore:{},app:{},handleItemClick:{type:Function},handleMouseOver:{type:Function},toggleSelect:{type:Function},onImageError:{type:Function},viewBucket:{type:Function},deleteItem:{type:Function},restore:{type:Function},downloadFile:{type:Function},trash:{type:Function},addItemToTags:{type:Function},view:{type:Function},restoreLoading:{type:Function},trashLoading:{type:Function}},setup(we){return(t,a)=>{var U;const v=gt,b=Vo,I=ct,H=Po,N=Jt,$=be("tooltip");return t.isPhone?(s(),l(N,{key:1,"is-selected":t.selectedIds.includes(t.item.id),"is-selecting":t.shiftEffectingIds.includes(t.item.id),"checkbox-checked":t.shiftEffectingIds.includes(t.item.id)?t.shouldSelect:t.selectedIds.includes(t.item.id),onClick:a[8]||(a[8]=p=>t.handleItemClick(p,t.item,t.index,()=>t.view(t.index))),onMouseenter:a[9]||(a[9]=d(p=>t.handleMouseOver(p,t.index),["stop"])),onCheckboxClick:a[10]||(a[10]=p=>t.toggleSelect(p,t.item,t.index))},{image:u(()=>[g("div",Yo,[t.imageErrorIds.includes(t.item.id)?(s(),m("img",{key:0,src:`/ficons/${e(_e)(t.item.path)}.svg`,class:"svg"},null,8,Jo)):(s(),m("img",{key:1,class:"image-thumb",src:e(oe)(t.item.fileId,"&w=200&h=200"),onError:a[6]||(a[6]=p=>t.onImageError(t.item.id))},null,40,xo))])]),title:u(()=>[Je(_(e(q)(t.item.path)),1)]),subtitle:u(()=>{var p;return[g("div",es,[g("span",null,_(e(ye)(t.item.size)),1),g("span",null,_(e(he)(t.item.duration)),1),g("a",{onClick:a[7]||(a[7]=d(T=>t.viewBucket(t.mainStore,t.item.bucketId),["stop","prevent"]))},_((p=t.bucketsMap[t.item.bucketId])==null?void 0:p.name),1),r(I,{tags:t.item.tags,type:t.dataType,"only-links":!0},null,8,["tags","type"])]),g("div",ts,_(e(xe)(t.item.createdAt)),1)]}),actions:u(()=>[r(H,{item:t.item,filter:t.filter,"data-type":t.dataType,app:t.app,"delete-item":t.deleteItem,restore:t.restore,"download-file":t.downloadFile,trash:t.trash,"add-item-to-tags":t.addItemToTags,"restore-loading":t.restoreLoading,"trash-loading":t.trashLoading},null,8,["item","filter","data-type","app","delete-item","restore","download-file","trash","add-item-to-tags","restore-loading","trash-loading"])]),_:1},8,["is-selected","is-selecting","checkbox-checked"])):(s(),m("section",{key:0,class:P(["media-item selectable-card",{selected:t.selectedIds.includes(t.item.id),selecting:t.shiftEffectingIds.includes(t.item.id)}]),onClick:a[4]||(a[4]=d(p=>t.handleItemClick(p,t.item,t.index,()=>t.view(t.index)),["stop"])),onMouseenter:a[5]||(a[5]=d(p=>t.handleMouseOver(p,t.index),["stop"]))},[g("div",Oo,[t.shiftEffectingIds.includes(t.item.id)?(s(),l(v,{key:0,class:"checkbox","touch-target":"wrapper",checked:t.shouldSelect,onClick:a[0]||(a[0]=d(p=>t.toggleSelect(p,t.item,t.index),["stop"]))},null,8,["checked"])):(s(),l(v,{key:1,class:"checkbox","touch-target":"wrapper",checked:t.selectedIds.includes(t.item.id),onClick:a[1]||(a[1]=d(p=>t.toggleSelect(p,t.item,t.index),["stop"]))},null,8,["checked"])),g("span",Qo,[r(b,{id:t.index+1,raw:t.item},null,8,["id","raw"])])]),g("div",Ko,[t.imageErrorIds.includes(t.item.id)?(s(),m("img",{key:0,src:`/ficons/${e(_e)(t.item.path)}.svg`,class:"svg"},null,8,jo)):(s(),m("img",{key:1,class:"image-thumb",src:e(oe)(t.item.fileId,"&w=200&h=200"),onError:a[2]||(a[2]=p=>t.onImageError(t.item.id))},null,40,Wo))]),g("div",Zo,_(e(q)(t.item.path)),1),g("div",Go,[g("span",null,_(e(ye)(t.item.size)),1),g("span",null,_(e(he)(t.item.duration)),1),g("a",{onClick:a[3]||(a[3]=d(p=>t.viewBucket(t.mainStore,t.item.bucketId),["stop","prevent"]))},_((U=t.bucketsMap[t.item.bucketId])==null?void 0:U.name),1),r(I,{tags:t.item.tags,type:t.dataType,"only-links":!0},null,8,["tags","type"])]),r(H,{item:t.item,filter:t.filter,"data-type":t.dataType,app:t.app,"delete-item":t.deleteItem,restore:t.restore,"download-file":t.downloadFile,trash:t.trash,"add-item-to-tags":t.addItemToTags,"restore-loading":t.restoreLoading,"trash-loading":t.trashLoading},null,8,["item","filter","data-type","app","delete-item","restore","download-file","trash","add-item-to-tags","restore-loading","trash-loading"]),g("div",Xo,[c((s(),m("span",null,[Je(_(e(xe)(t.item.createdAt)),1)])),[[$,e(xt)(t.item.createdAt)]])])],34))}}}),ss={class:"top-app-bar"},ns={class:"title"},as={key:0},is={key:1},ls={key:0,class:"actions"},ds=["onClick"],rs={key:0,class:"secondary-actions"},us=["onClick","onMouseenter"],ps=["src"],ms=["src","onError"],cs={key:1,class:"actions"},gs={class:"right"},vs={key:2,class:"no-data-placeholder"},B=55,Es=$e({__name:"VideosView",setup(we){var Ke;const t=vo("isPhone"),a=eo(),{videoSortBy:v}=et(a),b=z([]),{t:I}=it(),{parseQ:H,buildQ:N}=Ho(),$=to({tagIds:[],bucketId:void 0}),U=oo(),{app:p,urlTokenKey:T,uploads:se}=et(U),Z=z(!1),ne=z(!1),{input:vt,upload:kt,uploadChanged:Ce}=tt(se),{input:ft,upload:_t,uploadChanged:Ie}=tt(se),{dropping:yt,fileDragEnter:Te,fileDragLeave:Fe,dropFiles:ht}=so(se),ae=z(!1),k=no.VIDEO,Se=ao(),Ee=Se.query,ie=z(parseInt(((Ke=Ee.page)==null?void 0:Ke.toString())??"1")),{tags:O,buckets:Q,fetch:$t}=io(k),bt=ot(()=>{const o={};return Q.value.forEach(i=>{o[i.id]=i}),o}),F=z(""),{addToTags:wt}=Ro(k,O),{deleteItems:le,deleteItem:de}=lo(),{view:Ct}=To(k),{selectedIds:w,allChecked:Ve,realAllChecked:D,selectRealAll:It,allCheckedAlertVisible:Tt,clearSelection:K,toggleAllChecked:Ft,toggleSelect:G,total:S,checked:R,shiftEffectingIds:re,handleItemClick:De,handleMouseOver:Le,selectAll:St,shouldSelect:Ae}=zo(b),{downloadItems:Me}=ro(T,k,K,()=>yo("videos")),{downloadFile:ue}=Io(T),Be=o=>{const i=Se.query.q;st(a,i?`/videos?page=${o}&q=${i}`:`/videos?page=${o}`)},{keyDown:Ue,keyUp:Re}=qo(S,B,ie,St,K,Be,()=>{ee(te.MEDIA_TRASH,p.value.osVersion)?Y(k,W()):le(k,w.value,D.value,S.value,F.value)}),pe=z([]),Et=wo(),Vt=ot(()=>b.value.map(o=>({src:oe(o.fileId),name:q(o.path),duration:o.duration,size:o.size,path:o.path,data:o,type:k}))),ze=o=>{pe.value.push(o)},{loading:X,fetch:j}=uo({handle:async(o,i)=>{if(ae.value=!1,i)$o(I(i),"error");else if(o){const L=[];for(const E of o.videos)L.push({...E,fileId:bo(T.value,E.path,E.id)});b.value=L,S.value=o.videoCount}},document:ho,variables:()=>({offset:(ie.value-1)*B,limit:B,query:F.value,sortBy:v.value})}),{trashLoading:me,trash:Y}=po(),{restoreLoading:ce,restore:ge}=mo();function ve(o){U.lightbox={sources:Vt.value,index:o,visible:!0}}const W=()=>{let o=F.value;return D.value||(o=`ids:${w.value.join(",")}`),o};function Dt(o){v.value!==o&&(ae.value=!0,v.value=o)}function qe(o){return o?`/videos?q=${o}`:"/videos"}function He(o){Fo(So,{type:k,tags:O.value,item:{key:o.id,title:o.title,size:o.size},selected:O.value.filter(i=>o.tags.some(L=>L.id===i.id))})}function ke(){const o=Q.value.find(i=>i.id===$.bucketId);return o?at(o.topItems[0]):`${p.value.internalStoragePath}/Movies`}function Lt(){kt(ke())}function At(){_t(ke())}function Mt(o){ht(o,ke(),i=>nt(i.name))}const Ne=o=>{o.type===k&&(K(),j())},Pe=o=>{o.type===k&&j()},Oe=o=>{o.type===k&&(K(),j())},Qe=o=>{o.status==="done"&&nt(o.fileName)&&((!$.bucketId||Q.value.some(L=>L.id===$.bucketId&&L.topItems.some(E=>o.dir.startsWith(at(E)))))&&setTimeout(()=>{j()},1e3),M.emit("media_items_actioned",{type:k,action:"upload",query:""}))};function Bt(o){Object.assign($,o),st(a,qe(N($)))}return co(()=>{var o;F.value=Eo(((o=Ee.q)==null?void 0:o.toString())??""),H($,F.value),$t(),j(),M.on("item_tags_updated",Pe),M.on("items_tags_updated",Ne),M.on("media_items_actioned",Oe),M.on("upload_task_done",Qe),window.addEventListener("keydown",Ue),window.addEventListener("keyup",Re)}),go(()=>{M.off("item_tags_updated",Pe),M.off("items_tags_updated",Ne),M.off("media_items_actioned",Oe),M.off("upload_task_done",Qe),window.removeEventListener("keydown",Ue),window.removeEventListener("keyup",Re)}),(o,i)=>{const L=gt,E=dt,f=lt,je=rt,J=ut,We=pt,Ze=mt,Ut=Do,Rt=Uo,zt=Mo,Ge=ko,qt=Bo,Xe=Zt,Ht=Ao,Nt=Lo,fe=Xt,Ye=Yt,Pt=Co,Ot=ct,Qt=os,Kt=Gt,jt=Wt,h=be("tooltip");return s(),m(C,null,[g("div",ss,[r(L,{"touch-target":"wrapper",checked:e(Ve),indeterminate:!e(Ve)&&e(R),onChange:e(Ft)},null,8,["checked","indeterminate","onChange"]),g("div",ns,[e(w).length?(s(),m("span",as,_(o.$t("x_selected",{count:e(D)?e(S).toLocaleString():e(w).length.toLocaleString()})),1)):(s(),m("span",is,_(o.$t("page_title.videos"))+" ("+_(e(S).toLocaleString())+")",1)),e(R)?(s(),m(C,{key:2},[$.trash?(s(),m(C,{key:0},[c((s(),l(f,{onClick:i[0]||(i[0]=d(n=>e(le)(e(k),e(w),e(D),e(S),F.value),["stop"]))},{default:u(()=>[r(E)]),_:1})),[[h,o.$t("delete")]]),c((s(),l(f,{loading:e(ce)(W()),onClick:i[1]||(i[1]=d(n=>e(ge)(e(k),W()),["stop"]))},{default:u(()=>[r(je)]),_:1},8,["loading"])),[[h,o.$t("restore")]]),c((s(),l(f,{onClick:i[2]||(i[2]=d(n=>e(Me)(e(D),e(w),F.value),["stop"]))},{default:u(()=>[r(J)]),_:1})),[[h,o.$t("download")]])],64)):(s(),m(C,{key:1},[e(ee)(e(te).MEDIA_TRASH,e(p).osVersion)?c((s(),l(f,{key:0,loading:e(me)(W()),onClick:i[3]||(i[3]=d(n=>e(Y)(e(k),W()),["stop"]))},{default:u(()=>[r(We)]),_:1},8,["loading"])),[[h,o.$t("move_to_trash")]]):c((s(),l(f,{key:1,onClick:i[4]||(i[4]=d(n=>e(le)(e(k),e(w),e(D),e(S),F.value),["stop"]))},{default:u(()=>[r(E)]),_:1})),[[h,o.$t("delete")]]),c((s(),l(f,{onClick:i[5]||(i[5]=d(n=>e(Me)(e(D),e(w),F.value),["stop"]))},{default:u(()=>[r(J)]),_:1})),[[h,o.$t("download")]]),c((s(),l(f,{onClick:i[6]||(i[6]=d(n=>e(wt)(e(w),e(D),F.value),["stop"]))},{default:u(()=>[r(Ze)]),_:1})),[[h,o.$t("add_to_tags")]])],64))],64)):V("",!0)]),!e(t)||!e(R)?(s(),m("div",ls,[r(Ut,{filter:$,tags:e(O),buckets:e(Q),"get-url":qe,"show-chips":!e(t),"is-phone":e(t)},null,8,["filter","tags","buckets","show-chips","is-phone"]),r(Rt),$.trash?V("",!0):(s(),l(Ge,{key:0,modelValue:Z.value,"onUpdate:modelValue":i[9]||(i[9]=n=>Z.value=n)},{trigger:u(()=>[c((s(),l(f,null,{default:u(()=>[r(zt)]),_:1})),[[h,o.$t("upload")]])]),default:u(()=>[g("div",{class:"dropdown-item",onClick:i[7]||(i[7]=d(n=>{Lt(),Z.value=!1},["stop"]))},_(o.$t("upload_files")),1),g("div",{class:"dropdown-item",onClick:i[8]||(i[8]=d(n=>{At(),Z.value=!1},["stop"]))},_(o.$t("upload_folder")),1)]),_:1},8,["modelValue"])),r(Ge,{modelValue:ne.value,"onUpdate:modelValue":i[10]||(i[10]=n=>ne.value=n)},{trigger:u(()=>[c((s(),l(f,{loading:ae.value},{default:u(()=>[r(qt)]),_:1},8,["loading"])),[[h,o.$t("sort")]])]),default:u(()=>[(s(!0),m(C,null,x(e(Et),n=>(s(),m("div",{key:n.value,class:P(["dropdown-item",{selected:n.value===e(v)}]),onClick:A=>{Dt(n.value),ne.value=!1}},_(o.$t(n.label)),11,ds))),128))]),_:1},8,["modelValue"]),e(t)?V("",!0):(s(),l(Xe,{key:1,"card-view":e(a).videosCardView,"onUpdate:cardView":i[11]||(i[11]=n=>e(a).videosCardView=n)},null,8,["card-view"]))])):V("",!0)]),e(t)&&!e(R)?(s(),m("div",rs,[r(Xe,{"card-view":e(a).videosCardView,"onUpdate:cardView":i[12]||(i[12]=n=>e(a).videosCardView=n)},null,8,["card-view"])])):V("",!0),e(t)?(s(),l(Ht,{key:1,class:"mobile-search-filters",filter:$,tags:e(O),feeds:[],buckets:e(Q),types:[],onFilterChange:Bt},null,8,["filter","tags","buckets"])):V("",!0),r(Nt,{limit:B,total:e(S),"all-checked-alert-visible":e(Tt),"real-all-checked":e(D),"select-real-all":e(It),"clear-selection":e(K)},null,8,["total","all-checked-alert-visible","real-all-checked","select-real-all","clear-selection"]),g("div",{class:"scroll-content",onDragover:i[16]||(i[16]=d((...n)=>e(Te)&&e(Te)(...n),["stop","prevent"]))},[c(g("div",{class:"drag-mask",onDrop:d(Mt,["stop","prevent"]),onDragleave:i[13]||(i[13]=d((...n)=>e(Fe)&&e(Fe)(...n),["stop","prevent"]))},_(o.$t("release_to_send_files")),545),[[fo,e(yt)]]),e(a).videosCardView?(s(),m("div",{key:1,class:P(["main-list media-list",{"select-mode":e(R)}])},[(s(!0),m(C,null,x(b.value,(n,A)=>(s(),l(Qt,{key:n.id,item:n,index:A,"is-phone":e(t),"selected-ids":e(w),"shift-effecting-ids":e(re),"should-select":e(Ae),"image-error-ids":pe.value,"buckets-map":bt.value,filter:$,"data-type":e(k),"main-store":e(a),app:e(p),"handle-item-click":e(De),"handle-mouse-over":e(Le),"toggle-select":e(G),"on-image-error":ze,"view-bucket":e(Ct),"delete-item":e(de),restore:e(ge),"download-file":e(ue),trash:e(Y),"add-item-to-tags":He,view:ve,"restore-loading":e(ce),"trash-loading":e(me)},null,8,["item","index","is-phone","selected-ids","shift-effecting-ids","should-select","image-error-ids","buckets-map","filter","data-type","main-store","app","handle-item-click","handle-mouse-over","toggle-select","view-bucket","delete-item","restore","download-file","trash","restore-loading","trash-loading"]))),128)),e(X)&&b.value.length===0?(s(),l(Kt,{key:0,limit:B,"is-phone":e(t)},null,8,["is-phone"])):V("",!0)],2)):(s(),m("div",{key:0,class:P(["media-grid",{"select-mode":e(R)}])},[(s(!0),m(C,null,x(b.value,(n,A)=>(s(),m("section",{key:n.id,class:P(["media-item",{selected:e(w).includes(n.id),selecting:e(re).includes(n.id)}]),onClick:d(y=>e(De)(y,n,A,ve),["stop"]),onMouseenter:d(y=>e(Le)(y,A),["stop"])},[pe.value.includes(n.id)?(s(),m("img",{key:0,src:`/ficons/${e(_e)(n.path)}.svg`,class:"image svg"},null,8,ps)):(s(),m("img",{key:1,class:"image image-thumb",src:e(oe)(n.fileId,"&w=200&h=200"),onError:y=>ze(n.id)},null,40,ms)),e(re).includes(n.id)?(s(),l(f,{key:2,class:"btn-checkbox",onClick:d(y=>e(G)(y,n,A),["stop"])},{default:u(()=>[e(Ae)?(s(),l(fe,{key:0})):(s(),l(Ye,{key:1}))]),_:2},1032,["onClick"])):e(w).includes(n.id)?(s(),l(f,{key:3,class:"btn-checkbox",onClick:d(y=>e(G)(y,n,A),["stop"])},{default:u(()=>[r(fe)]),_:2},1032,["onClick"])):(s(),m(C,{key:4},[r(f,{class:"btn-checkbox",onClick:d(y=>e(G)(y,n,A),["stop"])},{default:u(()=>[e(w).includes(n.id)?(s(),l(fe,{key:0})):(s(),l(Ye,{key:1}))]),_:2},1032,["onClick"]),e(R)?c((s(),l(f,{key:0,class:"btn-zoom sm",onClick:d(y=>ve(A),["stop"])},{default:u(()=>[r(Pt)]),_:2},1032,["onClick"])),[[h,o.$t("open")]]):(s(),m("div",cs,[$.trash?(s(),m(C,{key:0},[c((s(),l(f,{class:"sm",onClick:d(y=>e(de)(e(k),n),["stop"])},{default:u(()=>[r(E)]),_:2},1032,["onClick"])),[[h,o.$t("delete")]]),c((s(),l(f,{class:"sm",loading:e(ce)(`ids:${n.id}`),onClick:d(y=>e(ge)(e(k),`ids:${n.id}`),["stop"])},{default:u(()=>[r(je)]),_:2},1032,["loading","onClick"])),[[h,o.$t("restore")]]),c((s(),l(f,{class:"sm",onClick:d(y=>e(ue)(n.path,e(q)(n.path).replace(" ","-")),["stop"])},{default:u(()=>[r(J)]),_:2},1032,["onClick"])),[[h,o.$t("download")]])],64)):(s(),m(C,{key:1},[e(ee)(e(te).MEDIA_TRASH,e(p).osVersion)?c((s(),l(f,{key:0,class:"sm",loading:e(me)(`ids:${n.id}`),onClick:d(y=>e(Y)(e(k),`ids:${n.id}`),["stop"])},{default:u(()=>[r(We)]),_:2},1032,["loading","onClick"])),[[h,o.$t("move_to_trash")]]):c((s(),l(f,{key:1,class:"sm",onClick:d(y=>e(de)(e(k),n),["stop"])},{default:u(()=>[r(E)]),_:2},1032,["onClick"])),[[h,o.$t("delete")]]),c((s(),l(f,{class:"sm",onClick:d(y=>e(ue)(n.path,e(q)(n.path).replace(" ","-")),["stop"])},{default:u(()=>[r(J)]),_:2},1032,["onClick"])),[[h,o.$t("download")]]),c((s(),l(f,{class:"sm",onClick:d(y=>He(n),["stop"])},{default:u(()=>[r(Ze)]),_:2},1032,["onClick"])),[[h,o.$t("add_to_tags")]])],64))])),g("div",{class:P(["info",{"has-tags":n.tags.length>0}])},[r(Ot,{tags:n.tags,type:e(k)},null,8,["tags","type"]),g("span",gs,_(["SIZE_ASC","SIZE_DESC"].includes(e(v))?e(ye)(n.size):e(he)(n.duration)),1)],2)],64))],42,us))),128)),e(X)&&b.value.length===0?(s(),m(C,{key:0},x(B,n=>g("section",{key:n,class:"skeleton-image media-item"})),64)):V("",!0)],2)),!e(X)&&b.value.length===0?(s(),m("div",vs,_(o.$t(e(_o)(e(X),e(p).permissions,"WRITE_EXTERNAL_STORAGE"))),1)):V("",!0),e(S)>B?(s(),l(jt,{key:3,page:ie.value,go:Be,total:e(S),limit:B},null,8,["page","total"])):V("",!0),g("input",{ref_key:"fileInput",ref:vt,style:{display:"none"},type:"file",accept:"video/*",multiple:"",onChange:i[14]||(i[14]=(...n)=>e(Ce)&&e(Ce)(...n))},null,544),g("input",{ref_key:"dirFileInput",ref:ft,style:{display:"none"},type:"file",accept:"video/*",multiple:"",webkitdirectory:"",mozdirectory:"",directory:"",onChange:i[15]||(i[15]=(...n)=>e(Ie)&&e(Ie)(...n))},null,544)],32)],64)}}});export{Es as default};
