import{_ as Yt}from"./VPagination.vuevuetypescriptsetuptruelang-DBODymeT.js";import{_ as Zt,u as Jt,a as xt}from"./key-events-CGCvIZ4E.js";import{d as Z,c,M as m,o as i,a as r,N as es,t as h,m as Ke,u as ye,O as g,h as z,a0 as U,P as ce,k as t,I as je,B as p,x as u,j as d,ac as We,aR as Xe,aS as Be,ao as Ye,aT as le,aU as de,aV as Ze,ba as ts,Q as Je,am as ss,R as re,b6 as Ve,aL as Re,q as Ue,ad as ze,T as os,U as as,J as Ne,V as Qe,i as ue,bb as is,bc as ns,s as pe,f as xe,a7 as w,aX as et,H as me,r as V,bd as ls,e as ds,W as rs,aq as He,ar as us,X as ps,aW as ms,aY as ys,as as cs,Y as gs,aZ as vs,a_ as fs,w as hs,Z as ks,$ as _s,v as Is,al as bs,au as Ts,a1 as ne,a2 as $s,aB as ws,be as Fs,at as Ps,aA as Cs,b2 as As,a4 as Ls,D as Ss,bf as Oe,a5 as Es,a6 as Ds,b4 as Ge,a8 as Ms,a9 as qs,L as Bs}from"./index-D87Nr3Nw.js";import{_ as Vs}from"./ListItemPhone.vuevuetypescriptsetuptruelang-CYRT3CJ2.js";import{_ as Rs}from"./FieldId.vuevuetypescriptsetuptruelang-DRoBQnQY.js";import{_ as tt}from"./VCheckbox-CrJS-AL3.js";import{_ as Us}from"./AllCheckedAlert.vuevuetypescriptsetuptruelang-DdXAmHeh.js";import{_ as zs,a as Ns}from"./upload-rounded-B_ESm6mv.js";import{_ as Qs}from"./MediaKeyboardShortcuts.vuevuetypescriptsetuptruelang-CRN5GL3G.js";import{a as Hs}from"./tags-TXV4-Odd.js";const Os={key:0,class:"media-item selectable-card-skeleton"},Gs={class:"start"},Ks={class:"number"},js=Z({__name:"AudioSkeletonItem",props:{index:{},isPhone:{type:Boolean}},setup(C){return(e,s)=>{const n=Zt;return e.isPhone?(i(),m(n,{key:1,"title-width":"70%",subtitles:[{width:"45%"},{width:"40%"},{width:"50%"}],"action-count":4})):(i(),c("section",Os,[r("div",Gs,[s[0]||(s[0]=r("div",{class:"skeleton-checkbox"},null,-1)),r("span",Ks,h(e.index),1)]),s[1]||(s[1]=es('<div class="image"><div class="skeleton-image lg"></div></div><div class="title"><div class="skeleton-text lg" style="width:40%;"></div></div><div class="subtitle"><div class="skeleton-text" style="width:30%;"></div></div><div class="actions"><div class="skeleton-text lg" style="width:140px;"></div></div><div class="artist"><div class="skeleton-text" style="width:60px;"></div></div><div class="time"><div class="skeleton-text" style="width:60px;"></div></div>',6))]))}}}),Ws={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Xs(C,e){return i(),c("svg",Ws,e[0]||(e[0]=[r("path",{fill:"currentColor",d:"M10 16q.425 0 .713-.288T11 15V9q0-.425-.288-.712T10 8t-.712.288T9 9v6q0 .425.288.713T10 16m4 0q.425 0 .713-.288T15 15V9q0-.425-.288-.712T14 8t-.712.288T13 9v6q0 .425.288.713T14 16m-2 6q-2.075 0-3.9-.788t-3.175-2.137T2.788 15.9T2 12t.788-3.9t2.137-3.175T8.1 2.788T12 2t3.9.788t3.175 2.137T21.213 8.1T22 12t-.788 3.9t-2.137 3.175t-3.175 2.138T12 22m0-2q3.35 0 5.675-2.325T20 12t-2.325-5.675T12 4T6.325 6.325T4 12t2.325 5.675T12 20m0-8"},null,-1)]))}const Ys=Ke({name:"material-symbols-pause-circle-outline-rounded",render:Xs}),Zs={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Js(C,e){return i(),c("svg",Zs,e[0]||(e[0]=[r("path",{fill:"currentColor",d:"M3 16v-2h7v2zm0-4v-2h11v2zm0-4V6h11v2zm13 12v-4h-4v-2h4v-4h2v4h4v2h-4v4z"},null,-1)]))}const st=Ke({name:"material-symbols-playlist-add",render:Js}),xs={class:"actions"},eo=Z({__name:"AudioActionButtons",props:{item:{},filter:{},dataType:{},animatingIds:{},playLoading:{type:Boolean},playPath:{},app:{},deleteItem:{type:Function},restore:{type:Function},downloadFile:{type:Function},trash:{type:Function},handleRemoveFromPlaylist:{type:Function},addToPlaylist:{type:Function},addItemToTags:{type:Function},pause:{type:Function},isAudioPlaying:{type:Function},isInPlaylist:{type:Function},restoreLoading:{type:Function},trashLoading:{type:Function}},setup(C){const{t:e}=ye();return(s,n)=>{const I=We,v=je,N=Xe,$=Ye,F=Ze,A=ts,y=st,E=Je,P=ss,f=Ys,k=ce("tooltip");return i(),c("div",xs,[s.filter.trash?(i(),c(U,{key:0},[g((i(),m(v,{class:"sm",onClick:n[0]||(n[0]=p(_=>s.deleteItem(s.dataType,s.item),["stop"]))},{default:u(()=>[d(I)]),_:1})),[[k,t(e)("delete")]]),g((i(),m(v,{class:"sm",loading:s.restoreLoading(`ids:${s.item.id}`),onClick:n[1]||(n[1]=p(_=>s.restore(s.dataType,`ids:${s.item.id}`),["stop"]))},{default:u(()=>[d(N)]),_:1},8,["loading"])),[[k,t(e)("restore")]]),g((i(),m(v,{class:"sm",onClick:n[2]||(n[2]=p(_=>s.downloadFile(s.item.path,t(Be)(s.item.path).replace(" ","-")),["stop"]))},{default:u(()=>[d($)]),_:1})),[[k,t(e)("download")]])],64)):(i(),c(U,{key:1},[t(le)(t(de).MEDIA_TRASH,s.app.osVersion)?g((i(),m(v,{key:0,class:"sm",loading:s.trashLoading(`ids:${s.item.id}`),onClick:n[3]||(n[3]=p(_=>s.trash(s.dataType,`ids:${s.item.id}`),["stop"]))},{default:u(()=>[d(F)]),_:1},8,["loading"])),[[k,t(e)("move_to_trash")]]):g((i(),m(v,{key:1,class:"sm",onClick:n[4]||(n[4]=p(_=>s.deleteItem(s.dataType,s.item),["stop"]))},{default:u(()=>[d(I)]),_:1})),[[k,t(e)("delete")]]),g((i(),m(v,{class:"sm",onClick:n[5]||(n[5]=p(_=>s.downloadFile(s.item.path,t(Be)(s.item.path).replace(" ","-")),["stop"]))},{default:u(()=>[d($)]),_:1})),[[k,t(e)("download")]]),s.isInPlaylist(s.item)&&!s.animatingIds.includes(s.item.id)?g((i(),m(v,{key:2,class:"sm",onClick:n[6]||(n[6]=p(_=>s.handleRemoveFromPlaylist(_,s.item),["stop","prevent"]))},{default:u(()=>[d(A,{class:"playlist-remove-icon"})]),_:1})),[[k,t(e)("remove_from_playlist")]]):s.isInPlaylist(s.item)&&s.animatingIds.includes(s.item.id)?(i(),m(v,{key:3,class:"sm",disabled:!0},{default:u(()=>[d(A,{class:"playlist-remove-icon rotating"})]),_:1})):!s.isInPlaylist(s.item)&&!s.animatingIds.includes(s.item.id)?g((i(),m(v,{key:4,class:"sm",onClick:n[7]||(n[7]=p(_=>s.addToPlaylist(_,s.item),["stop","prevent"]))},{default:u(()=>[d(y,{class:"playlist-add-icon"})]),_:1})),[[k,t(e)("add_to_playlist")]]):!s.isInPlaylist(s.item)&&s.animatingIds.includes(s.item.id)?(i(),m(v,{key:5,class:"sm",disabled:!0},{default:u(()=>[d(y,{class:"playlist-add-icon rotating"})]),_:1})):z("",!0),g((i(),m(v,{class:"sm",onClick:n[8]||(n[8]=p(_=>s.addItemToTags(s.item),["stop"]))},{default:u(()=>[d(E)]),_:1})),[[k,t(e)("add_to_tags")]])],64)),s.playLoading&&s.item.path===s.playPath?(i(),m(P,{key:2,indeterminate:"",class:"sm"})):s.isAudioPlaying(s.item)?g((i(),m(v,{key:3,class:"sm",onClick:n[9]||(n[9]=p(_=>s.pause(),["stop"]))},{default:u(()=>[d(f)]),_:1})),[[k,t(e)("pause")]]):z("",!0)])}}}),to={class:"start"},so={class:"number"},oo={class:"image"},ao=["src"],io=["src"],no={class:"title"},lo={class:"subtitle"},ro={class:"duration"},uo={class:"artist"},po={class:"time"},mo={class:"image"},yo=["src"],co=["src"],go={class:"subtitle"},vo={class:"duration"},fo={key:0,class:"subtitle"},ho={class:"subtitle"},ko={key:0,class:"artist"},_o={class:"time"},Io=Z({__name:"AudioListItem",props:{item:{},index:{},selectedIds:{},shiftEffectingIds:{},shouldSelect:{type:Boolean},isPhone:{type:Boolean},imageErrorIds:{},bucketsMap:{},filter:{},dataType:{},animatingIds:{},playLoading:{type:Boolean},playPath:{},mainStore:{},app:{},handleItemClick:{type:Function},handleMouseOver:{type:Function},toggleSelect:{type:Function},onImageError:{type:Function},viewBucket:{type:Function},deleteItem:{type:Function},restore:{type:Function},downloadFile:{type:Function},trash:{type:Function},handleRemoveFromPlaylist:{type:Function},addToPlaylist:{type:Function},addItemToTags:{type:Function},play:{type:Function},pause:{type:Function},isAudioPlaying:{type:Function},isInPlaylist:{type:Function},restoreLoading:{type:Function},trashLoading:{type:Function}},setup(C){return(e,s)=>{var A;const n=tt,I=Rs,v=os,N=eo,$=Vs,F=ce("tooltip");return e.isPhone?(i(),m($,{key:1,"is-selected":e.selectedIds.includes(e.item.id),"is-selecting":e.shiftEffectingIds.includes(e.item.id),"checkbox-checked":e.shiftEffectingIds.includes(e.item.id)?e.shouldSelect:e.selectedIds.includes(e.item.id),onClick:s[8]||(s[8]=y=>e.handleItemClick(y,e.item,e.index,()=>e.play(e.item))),onMouseenter:s[9]||(s[9]=p(y=>e.handleMouseOver(y,e.index),["stop"])),onCheckboxClick:s[10]||(s[10]=y=>e.toggleSelect(y,e.item,e.index))},{image:u(()=>[r("div",mo,[e.imageErrorIds.includes(e.item.id)?(i(),c("img",{key:0,src:`/ficons/${t(Ve)(e.item.path)}.svg`,class:"svg"},null,8,yo)):(i(),c("img",{key:1,class:"image-thumb",src:t(Re)(e.item.albumFileId,"&w=200&h=200"),onError:s[6]||(s[6]=y=>e.onImageError(e.item.id))},null,40,co))])]),title:u(()=>[Ne(h(e.item.title),1)]),subtitle:u(()=>{var y;return[r("div",go,[r("span",null,h(t(Ue)(e.item.size)),1),r("span",vo,h(t(ze)(e.item.duration)),1)]),e.bucketsMap[e.item.bucketId]||e.item.tags.length>0?(i(),c("div",fo,[r("a",{onClick:s[7]||(s[7]=p(E=>e.viewBucket(e.mainStore,e.item.bucketId),["stop","prevent"]))},h((y=e.bucketsMap[e.item.bucketId])==null?void 0:y.name),1),d(v,{tags:e.item.tags,type:e.dataType,"only-links":!0},null,8,["tags","type"])])):z("",!0),r("div",ho,[e.item.artist?(i(),c("span",ko,h(e.item.artist),1)):z("",!0),r("span",_o,h(t(Qe)(e.item.createdAt)),1)])]}),actions:u(()=>[d(N,{item:e.item,filter:e.filter,"data-type":e.dataType,"animating-ids":e.animatingIds,"play-loading":e.playLoading,"play-path":e.playPath,app:e.app,"delete-item":e.deleteItem,restore:e.restore,"download-file":e.downloadFile,trash:e.trash,"handle-remove-from-playlist":e.handleRemoveFromPlaylist,"add-to-playlist":e.addToPlaylist,"add-item-to-tags":e.addItemToTags,pause:e.pause,"is-audio-playing":e.isAudioPlaying,"is-in-playlist":e.isInPlaylist,"restore-loading":e.restoreLoading,"trash-loading":e.trashLoading},null,8,["item","filter","data-type","animating-ids","play-loading","play-path","app","delete-item","restore","download-file","trash","handle-remove-from-playlist","add-to-playlist","add-item-to-tags","pause","is-audio-playing","is-in-playlist","restore-loading","trash-loading"])]),_:1},8,["is-selected","is-selecting","checkbox-checked"])):(i(),c("section",{key:0,class:re(["media-item selectable-card",{selected:e.selectedIds.includes(e.item.id),selecting:e.shiftEffectingIds.includes(e.item.id)}]),onClick:s[4]||(s[4]=p(y=>e.handleItemClick(y,e.item,e.index,()=>e.play(e.item)),["stop"])),onMouseenter:s[5]||(s[5]=p(y=>e.handleMouseOver(y,e.index),["stop"]))},[r("div",to,[e.shiftEffectingIds.includes(e.item.id)?(i(),m(n,{key:0,class:"checkbox","touch-target":"wrapper",checked:e.shouldSelect,onClick:s[0]||(s[0]=p(y=>e.toggleSelect(y,e.item,e.index),["stop"]))},null,8,["checked"])):(i(),m(n,{key:1,class:"checkbox","touch-target":"wrapper",checked:e.selectedIds.includes(e.item.id),onClick:s[1]||(s[1]=p(y=>e.toggleSelect(y,e.item,e.index),["stop"]))},null,8,["checked"])),r("span",so,[d(I,{id:e.index+1,raw:e.item},null,8,["id","raw"])])]),r("div",oo,[e.imageErrorIds.includes(e.item.id)?(i(),c("img",{key:0,src:`/ficons/${t(Ve)(e.item.path)}.svg`,class:"svg"},null,8,ao)):(i(),c("img",{key:1,class:"image-thumb",src:t(Re)(e.item.albumFileId,"&w=200&h=200"),onError:s[2]||(s[2]=y=>e.onImageError(e.item.id))},null,40,io))]),r("div",no,h(e.item.title),1),r("div",lo,[r("span",null,h(t(Ue)(e.item.size)),1),r("span",ro,h(t(ze)(e.item.duration)),1),r("a",{onClick:s[3]||(s[3]=p(y=>e.viewBucket(e.mainStore,e.item.bucketId),["stop","prevent"]))},h((A=e.bucketsMap[e.item.bucketId])==null?void 0:A.name),1),d(v,{tags:e.item.tags,type:e.dataType,"only-links":!0},null,8,["tags","type"])]),d(N,{item:e.item,filter:e.filter,"data-type":e.dataType,"animating-ids":e.animatingIds,"play-loading":e.playLoading,"play-path":e.playPath,app:e.app,"delete-item":e.deleteItem,restore:e.restore,"download-file":e.downloadFile,trash:e.trash,"handle-remove-from-playlist":e.handleRemoveFromPlaylist,"add-to-playlist":e.addToPlaylist,"add-item-to-tags":e.addItemToTags,pause:e.pause,"is-audio-playing":e.isAudioPlaying,"is-in-playlist":e.isInPlaylist,"restore-loading":e.restoreLoading,"trash-loading":e.trashLoading},null,8,["item","filter","data-type","animating-ids","play-loading","play-path","app","delete-item","restore","download-file","trash","handle-remove-from-playlist","add-to-playlist","add-item-to-tags","pause","is-audio-playing","is-in-playlist","restore-loading","trash-loading"]),r("div",uo,h(e.item.artist),1),r("div",po,[g((i(),c("span",null,[Ne(h(t(Qe)(e.item.createdAt)),1)])),[[F,t(as)(e.item.createdAt)]])])],34))}}}),bo=(C,e)=>{const{mutate:s,loading:n,onDone:I}=ue({document:is}),{mutate:v,loading:N,onDone:$}=ue({document:ns}),{app:F}=pe(xe()),{t:A}=ye();I(()=>{w.emit("refetch_app"),e()}),$(()=>{w.emit("refetch_app")});const y=et(()=>{var P;return((P=F.value)==null?void 0:P.audios)??[]}),E=P=>y.value.some(f=>f.path===P.path);return{loading:n,removeLoading:N,isInPlaylist:E,addItemsToPlaylist:(P,f,k,_)=>{let R=_;if(!k){if(f.length===0){me(A("select_first"),"error");return}R=`ids:${f.join(",")}`}s({query:R})},removeItemsFromPlaylist:(P,f,k,_)=>{if(k)C.value.filter(R=>E(R)).forEach(R=>{v({path:R.path})});else{if(f.length===0){me(A("select_first"),"error");return}C.value.filter(Q=>f.includes(Q.id)&&E(Q)).forEach(Q=>{v({path:Q.path})})}},addToPlaylist:(P,f)=>{s({query:`ids:${f.id}`})},removeFromPlaylist:(P,f)=>{v({path:f.path})}}},To=()=>{const C=V(""),{mutate:e,loading:s,onDone:n}=ue({document:ls});return n(()=>{w.emit("play_audio")}),{loading:s,playPath:C,play:I=>{C.value=I.path,e({path:I.path})},pause:()=>{w.emit("pause_audio")}}},$o={class:"top-app-bar"},wo={class:"title"},Fo={key:0},Po={key:1},Co={key:0,class:"actions"},Ao=["onClick"],Lo={key:0,class:"no-data-placeholder"},O=50,So=Z({__name:"AudiosView",setup(C){const e=Is("isPhone"),s=ds(),{audioSortBy:n}=pe(s),I=V([]),{t:v}=ye(),{parseQ:N}=qs(),$=rs({tagIds:[],bucketId:void 0}),{app:F,urlTokenKey:A,audioPlaying:y,uploads:E}=pe(xe()),P=o=>{var a;return y.value&&((a=F.value)==null?void 0:a.audioCurrent)===o.path},f=V([]),k=V(!1),_=V(!1),{input:R,upload:Q,uploadChanged:ge}=He(E),{input:ot,upload:at,uploadChanged:ve}=He(E),{dropping:it,fileDragEnter:fe,fileDragLeave:he,dropFiles:nt}=us(E),J=V(!1),b=ps.AUDIO,j=Ls(),W=V(1),{tags:x,buckets:ee,fetch:lt}=ms(b),dt=et(()=>{const o={};return ee.value.forEach(a=>{o[a.id]=a}),o}),L=V(""),{addToTags:rt}=Hs(b,x),{deleteItems:te,deleteItem:ut}=ys(),{view:pt}=As(b),{selectedIds:S,allChecked:ke,realAllChecked:D,selectRealAll:mt,allCheckedAlertVisible:yt,clearSelection:H,toggleAllChecked:ct,toggleSelect:gt,total:M,checked:X,shiftEffectingIds:vt,handleItemClick:ft,handleMouseOver:ht,selectAll:kt,shouldSelect:_t}=Jt(I),{downloadItems:_e}=cs(A,b,H,()=>ws("audios")),{downloadFile:It}=Cs(A),Ie=o=>{const a=j.query.q;Ss(s,a?`/audios?page=${o}&q=${a}`:`/audios?page=${o}`)},{keyDown:be,keyUp:Te}=xt(M,O,W,kt,H,Ie,()=>{le(de.MEDIA_TRASH,F.value.osVersion)?oe(b,K()):te(b,S.value,D.value,M.value,L.value)}),{addItemsToPlaylist:bt,addToPlaylist:Tt,removeFromPlaylist:$t,isInPlaylist:wt}=bo(I,H),Ft=Ps(),$e=V([]),{play:Pt,playPath:Ct,loading:At,pause:Lt}=To(),St=o=>{$e.value.push(o)},{loading:se,fetch:G}=gs({handle:(o,a)=>{J.value=!1,a?me(v(a),"error"):o&&(I.value=o.items,M.value=o.total)},document:Fs,variables:()=>({offset:(W.value-1)*O,limit:O,query:L.value,sortBy:n.value})}),{trashLoading:we,trash:oe}=vs(),{restoreLoading:Fe,restore:Pe}=fs();function Et(o){n.value!==o&&(J.value=!0,n.value=o)}function ae(){const o=ee.value.find(a=>a.id===$.bucketId);return o?Ge(o.topItems[0]):`${F.value.internalStoragePath}/Music`}function Dt(){Q(ae())}function Mt(){at(ae())}function qt(o){nt(o,ae(),a=>Oe(a.name))}const K=()=>{let o=L.value;return D.value||(o=`ids:${S.value.join(",")}`),o},Ce=o=>{o.type===b&&(H(),G())},Ae=o=>{o.type===b&&G()},Le=o=>{o.type===b&&(H(),G())},Se=o=>{o.status==="done"&&Oe(o.fileName)&&((!$.bucketId||ee.value.some(T=>T.id===$.bucketId&&T.topItems.some(Y=>o.dir.startsWith(Ge(Y)))))&&setTimeout(()=>{G()},1e3),w.emit("media_items_actioned",{type:b,action:"upload",query:""}))};function Bt(o){const a=o.tags.map(T=>T.id);Es(Ds,{type:b,tags:x.value,item:{key:o.id,title:o.title,size:o.size},selected:x.value.filter(T=>a.includes(T.id))})}function Vt(o,a){f.value.push(a.id),setTimeout(()=>{$t(o,a),setTimeout(()=>{f.value=f.value.filter(T=>T!==a.id)},200)},150)}function Rt(o,a){f.value.push(a.id),setTimeout(()=>{Tt(o,a),setTimeout(()=>{f.value=f.value.filter(T=>T!==a.id)},200)},150)}const ie=V(!1);function Ee(){var a,T;const o=parseInt(((a=j.query.page)==null?void 0:a.toString())??"1");W.value=Number.isFinite(o)&&o>0?o:1,L.value=Ms(((T=j.query.q)==null?void 0:T.toString())??""),N($,L.value),G()}return hs(()=>j.fullPath,()=>{ie.value&&Ee()}),ks(()=>{lt(),ie.value=!0,Ee(),w.on("item_tags_updated",Ae),w.on("items_tags_updated",Ce),w.on("media_items_actioned",Le),w.on("upload_task_done",Se),window.addEventListener("keydown",be),window.addEventListener("keyup",Te)}),_s(()=>{ie.value=!1,w.off("item_tags_updated",Ae),w.off("items_tags_updated",Ce),w.off("media_items_actioned",Le),w.off("upload_task_done",Se),window.removeEventListener("keydown",be),window.removeEventListener("keyup",Te)}),(o,a)=>{const T=tt,Y=We,q=je,Ut=Xe,De=Ye,zt=Ze,Nt=st,Qt=Je,Ht=Qs,Ot=zs,Me=bs,Gt=Ns,Kt=Us,jt=Io,Wt=js,Xt=Yt,B=ce("tooltip");return i(),c(U,null,[r("div",$o,[d(T,{"touch-target":"wrapper",checked:t(ke),indeterminate:!t(ke)&&t(X),onChange:t(ct)},null,8,["checked","indeterminate","onChange"]),r("div",wo,[t(S).length?(i(),c("span",Fo,h(o.$t("x_selected",{count:t(D)?t(M).toLocaleString():t(S).length.toLocaleString()})),1)):(i(),c("span",Po,h(o.$t("page_title.audios"))+" ("+h(t(M).toLocaleString())+")",1)),t(X)?(i(),c(U,{key:2},[$.trash?(i(),c(U,{key:0},[g((i(),m(q,{onClick:a[0]||(a[0]=p(l=>t(te)(t(b),t(S),t(D),t(M),L.value),["stop"]))},{default:u(()=>[d(Y)]),_:1})),[[B,o.$t("delete")]]),g((i(),m(q,{loading:t(Fe)(K()),onClick:a[1]||(a[1]=p(l=>t(Pe)(t(b),K()),["stop"]))},{default:u(()=>[d(Ut)]),_:1},8,["loading"])),[[B,o.$t("restore")]]),g((i(),m(q,{onClick:a[2]||(a[2]=p(l=>t(_e)(t(D),t(S),L.value),["stop"]))},{default:u(()=>[d(De)]),_:1})),[[B,o.$t("download")]])],64)):(i(),c(U,{key:1},[t(le)(t(de).MEDIA_TRASH,t(F).osVersion)?g((i(),m(q,{key:0,loading:t(we)(K()),onClick:a[3]||(a[3]=p(l=>t(oe)(t(b),K()),["stop"]))},{default:u(()=>[d(zt)]),_:1},8,["loading"])),[[B,o.$t("move_to_trash")]]):g((i(),m(q,{key:1,onClick:a[4]||(a[4]=p(l=>t(te)(t(b),t(S),t(D),t(M),L.value),["stop"]))},{default:u(()=>[d(Y)]),_:1})),[[B,o.$t("delete")]]),g((i(),m(q,{onClick:a[5]||(a[5]=p(l=>t(_e)(t(D),t(S),L.value),["stop"]))},{default:u(()=>[d(De)]),_:1})),[[B,o.$t("download")]]),g((i(),m(q,{onClick:a[6]||(a[6]=p(l=>t(bt)(l,t(S),t(D),L.value),["stop"]))},{default:u(()=>[d(Nt)]),_:1})),[[B,o.$t("add_to_playlist")]]),g((i(),m(q,{onClick:a[7]||(a[7]=p(l=>t(rt)(t(S),t(D),L.value),["stop"]))},{default:u(()=>[d(Qt)]),_:1})),[[B,o.$t("add_to_tags")]])],64))],64)):z("",!0)]),!t(e)||!t(X)?(i(),c("div",Co,[d(Ht),d(Me,{modelValue:k.value,"onUpdate:modelValue":a[10]||(a[10]=l=>k.value=l)},{trigger:u(()=>[g((i(),m(q,null,{default:u(()=>[d(Ot)]),_:1})),[[B,o.$t("upload")]])]),default:u(()=>[r("div",{class:"dropdown-item",onClick:a[8]||(a[8]=p(l=>{Dt(),k.value=!1},["stop"]))},h(o.$t("upload_files")),1),r("div",{class:"dropdown-item",onClick:a[9]||(a[9]=p(l=>{Mt(),k.value=!1},["stop"]))},h(o.$t("upload_folder")),1)]),_:1},8,["modelValue"]),d(Me,{modelValue:_.value,"onUpdate:modelValue":a[11]||(a[11]=l=>_.value=l)},{trigger:u(()=>[g((i(),m(q,{loading:J.value},{default:u(()=>[d(Gt)]),_:1},8,["loading"])),[[B,o.$t("sort")]])]),default:u(()=>[(i(!0),c(U,null,ne(t(Ft),l=>(i(),c("div",{key:l.value,class:re(["dropdown-item",{selected:l.value===t(n)}]),onClick:qe=>{Et(l.value),_.value=!1}},h(o.$t(l.label)),11,Ao))),128))]),_:1},8,["modelValue"])])):z("",!0)]),d(Kt,{limit:O,total:t(M),"all-checked-alert-visible":t(yt),"real-all-checked":t(D),"select-real-all":t(mt),"clear-selection":t(H)},null,8,["total","all-checked-alert-visible","real-all-checked","select-real-all","clear-selection"]),r("div",{class:"scroll-content",onDragover:a[15]||(a[15]=p((...l)=>t(fe)&&t(fe)(...l),["stop","prevent"]))},[g(r("div",{class:"drag-mask",onDrop:p(qt,["stop","prevent"]),onDragleave:a[12]||(a[12]=p((...l)=>t(he)&&t(he)(...l),["stop","prevent"]))},h(o.$t("release_to_send_files")),545),[[Ts,t(it)]]),r("div",{class:re(["main-list",{"select-mode":t(X)}])},[(i(!0),c(U,null,ne(I.value,(l,qe)=>(i(),m(jt,{key:l.id,item:l,index:qe,"is-phone":t(e),"selected-ids":t(S),"shift-effecting-ids":t(vt),"should-select":t(_t),"image-error-ids":$e.value,"buckets-map":dt.value,filter:$,"data-type":t(b),"animating-ids":f.value,"play-loading":t(At),"play-path":t(Ct),"main-store":t(s),app:t(F),"handle-item-click":t(ft),"handle-mouse-over":t(ht),"toggle-select":t(gt),"on-image-error":St,"view-bucket":t(pt),"delete-item":t(ut),restore:t(Pe),"download-file":t(It),trash:t(oe),"handle-remove-from-playlist":Vt,"add-to-playlist":Rt,"add-item-to-tags":Bt,play:t(Pt),pause:t(Lt),"is-audio-playing":P,"is-in-playlist":t(wt),"restore-loading":t(Fe),"trash-loading":t(we)},null,8,["item","index","is-phone","selected-ids","shift-effecting-ids","should-select","image-error-ids","buckets-map","filter","data-type","animating-ids","play-loading","play-path","main-store","app","handle-item-click","handle-mouse-over","toggle-select","view-bucket","delete-item","restore","download-file","trash","play","pause","is-in-playlist","restore-loading","trash-loading"]))),128)),t(se)&&I.value.length===0?(i(),c(U,{key:0},ne(20,l=>d(Wt,{key:l,index:l,"is-phone":t(e)},null,8,["index","is-phone"])),64)):z("",!0)],2),!t(se)&&I.value.length===0?(i(),c("div",Lo,h(o.$t(t($s)(t(se),t(F).permissions,"WRITE_EXTERNAL_STORAGE"))),1)):z("",!0),t(M)>O?(i(),m(Xt,{key:1,page:W.value,go:Ie,total:t(M),limit:O},null,8,["page","total"])):z("",!0),r("input",{ref_key:"fileInput",ref:R,style:{display:"none"},type:"file",accept:"audio/*",multiple:"",onChange:a[13]||(a[13]=(...l)=>t(ge)&&t(ge)(...l))},null,544),r("input",{ref_key:"dirFileInput",ref:ot,style:{display:"none"},type:"file",accept:"audio/*",multiple:"",webkitdirectory:"",mozdirectory:"",directory:"",onChange:a[14]||(a[14]=(...l)=>t(ve)&&t(ve)(...l))},null,544)],32)],64)}}}),Qo=Bs(So,[["__scopeId","data-v-d58ffaec"]]);export{Qo as default};
