import{L as E,c as d,o as s,N as ie,m as N,a as v,d as P,u as J,r as C,O as $,j as l,P as K,B as z,Q as ae,M as Q,x as H,al as de,I as re,J as L,t as S,bI as le,h as q,k as p,U as me,V as ve,T as ue,cF as ce,a4 as _e,s as pe,f as ye,Y as Te,e as $e,i as G,H as I,g as fe,Z as ge,$ as Fe,v as ze,aF as j,D as Y,a5 as Se,a6 as be,cG as we,cv as ke,bq as Ce,cH as qe,a7 as h}from"./index-DZ3IxO2v.js";import{_ as he}from"./print-outline-rounded-DZQt3lf_.js";import{_ as Le,a as Ee}from"./add-notes-outline-rounded-D4SM-Me5.js";import{u as Ne}from"./markdown-DzeAyZrz.js";import{u as Me}from"./feeds-BBZ3Lqpi.js";const Ve={};function De(f,e){return s(),d("article",null,e[0]||(e[0]=[ie('<div class="top-app-bar" data-v-961eea44><div class="title" data-v-961eea44><div class="skeleton-text lg" style="width:40%;" data-v-961eea44></div></div><div class="actions" data-v-961eea44><div class="skeleton-image sm" data-v-961eea44></div></div></div><div class="article-title" data-v-961eea44><div class="skeleton-text lg" style="width:60%;" data-v-961eea44></div></div><div class="md-container" data-v-961eea44><div class="skeleton-text" style="width:100%;" data-v-961eea44></div><div class="skeleton-text" style="width:90%;" data-v-961eea44></div><div class="skeleton-text" style="width:75%;" data-v-961eea44></div><div class="skeleton-text" style="width:85%;" data-v-961eea44></div><div class="skeleton-text" style="width:60%;" data-v-961eea44></div><div class="skeleton-text" style="width:80%;" data-v-961eea44></div><div class="skeleton-text" style="width:70%;" data-v-961eea44></div><div class="skeleton-text" style="width:65%;" data-v-961eea44></div></div>',3)]))}const Be=E(Ve,[["render",De],["__scopeId","data-v-961eea44"]]),He={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Ie(f,e){return s(),d("svg",He,e[0]||(e[0]=[v("path",{fill:"currentColor",d:"m4.675 15.425l-1.025 2.85q-.125.35-.4.538T2.625 19q-.575 0-.913-.487t-.137-1.038l4.4-11.725Q6.1 5.4 6.4 5.2t.65-.2h.9q.375 0 .663.2t.412.55L13.45 17.5q.2.55-.137 1.025T12.4 19q-.35 0-.65-.2t-.425-.55l-1-2.825zM5.4 13.4h4.2L7.55 7.6h-.1zM18 13h-2q-.425 0-.712-.288T15 12t.288-.712T16 11h2V9q0-.425.288-.712T19 8t.713.288T20 9v2h2q.425 0 .713.288T23 12t-.288.713T22 13h-2v2q0 .425-.288.713T19 16t-.712-.288T18 15z"},null,-1)]))}const Pe=N({name:"material-symbols-text-increase-rounded",render:Ie}),Qe={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Ae(f,e){return s(),d("svg",Qe,e[0]||(e[0]=[v("path",{fill:"currentColor",d:"M16 13q-.425 0-.712-.288T15 12t.288-.712T16 11h6q.425 0 .713.288T23 12t-.288.713T22 13zM4.675 15.425l-1.025 2.85q-.125.35-.4.538T2.625 19q-.575 0-.913-.487t-.137-1.038l4.4-11.725Q6.1 5.4 6.4 5.2t.65-.2h.9q.375 0 .663.2t.412.55L13.45 17.5q.2.55-.137 1.025T12.4 19q-.35 0-.65-.2t-.425-.55l-1-2.825zM5.4 13.4h4.2L7.55 7.6h-.1z"},null,-1)]))}const Re=N({name:"material-symbols-text-decrease-rounded",render:Ae}),Ue={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Ge(f,e){return s(),d("svg",Ue,e[0]||(e[0]=[v("path",{fill:"currentColor",d:"M14 7h-3.5q-.625 0-1.062-.437T9 5.5t.438-1.062T10.5 4h10q.625 0 1.063.438T22 5.5t-.437 1.063T20.5 7H17v11.5q0 .625-.437 1.063T15.5 20t-1.062-.437T14 18.5zm-9 5H3.5q-.625 0-1.062-.437T2 10.5t.438-1.062T3.5 9h6q.625 0 1.063.438T11 10.5t-.437 1.063T9.5 12H8v6.5q0 .625-.437 1.063T6.5 20t-1.062-.437T5 18.5z"},null,-1)]))}const je=N({name:"material-symbols-format-size-rounded",render:Ge}),Ye={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Je(f,e){return s(),d("svg",Ye,e[0]||(e[0]=[v("path",{fill:"currentColor",d:"M5 21q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h6q.425 0 .713.288T12 4t-.288.713T11 5H5v14h14v-6q0-.425.288-.712T20 12t.713.288T21 13v6q0 .825-.587 1.413T19 21zM19 6.4L10.4 15q-.275.275-.7.275T9 15t-.275-.7t.275-.7L17.6 5H15q-.425 0-.712-.288T14 4t.288-.712T15 3h5q.425 0 .713.288T21 4v5q0 .425-.288.713T20 10t-.712-.288T19 9z"},null,-1)]))}const Ke=N({name:"material-symbols-open-in-new-rounded",render:Je}),Oe={class:"action-buttons"},Ze=["href"],We={class:"btn-icon sm"},Xe={class:"btn-icon sm"},xe=P({__name:"FeedEntryActionButtons",props:{entryUrl:{},syncContentLoading:{type:Boolean}},emits:["addToTags","syncContent","saveToNotes","print","decreaseFontSize","increaseFontSize","resetFontSize"],setup(f){const{t:e}=J(),t=C(!1);return(n,o)=>{const m=ae,c=Ee,y=re,g=Ke,F=Le,i=he,M=je,b=Re,u=Pe,V=le,D=de,T=K("tooltip");return s(),d("div",Oe,[$((s(),d("button",{class:"btn-icon sm",style:{"margin-inline-start":"16px"},onClick:o[0]||(o[0]=z(_=>n.$emit("addToTags"),["prevent"]))},[l(m)])),[[T,n.$t("add_to_tags")]]),$((s(),Q(y,{loading:n.syncContentLoading,onClick:o[1]||(o[1]=z(_=>n.$emit("syncContent"),["prevent"]))},{default:H(()=>[l(c)]),_:1},8,["loading"])),[[T,n.$t("sync_content")]]),$((s(),d("a",{href:n.entryUrl,class:"btn-icon",target:"_blank"},[v("button",We,[l(g)])],8,Ze)),[[T,n.$t("view_original_article")]]),$((s(),d("button",{class:"btn-icon sm",onClick:o[2]||(o[2]=z(_=>n.$emit("saveToNotes"),["prevent"]))},[l(F)])),[[T,n.$t("save_to_notes")]]),$((s(),d("button",{class:"btn-icon sm",onClick:o[3]||(o[3]=z(_=>n.$emit("print"),["prevent"]))},[l(i)])),[[T,n.$t("print")]]),l(D,{modelValue:t.value,"onUpdate:modelValue":o[7]||(o[7]=_=>t.value=_)},{trigger:H(()=>[$((s(),d("button",Xe,[l(M)])),[[T,n.$t("font_size")]])]),default:H(()=>[v("div",{class:"dropdown-item",onClick:o[4]||(o[4]=_=>n.$emit("decreaseFontSize"))},[l(b),L(" "+S(n.$t("decrease_font_size")),1)]),v("div",{class:"dropdown-item",onClick:o[5]||(o[5]=_=>n.$emit("increaseFontSize"))},[l(u),L(" "+S(n.$t("increase_font_size")),1)]),v("div",{class:"dropdown-item",onClick:o[6]||(o[6]=_=>n.$emit("resetFontSize"))},[l(V),L(" "+S(n.$t("reset_font_size")),1)])]),_:1},8,["modelValue"])])}}}),et=E(xe,[["__scopeId","data-v-0d7e7fae"]]),tt={class:"feed-entry-toolbar"},nt={class:"top-app-bar"},ot={class:"title"},st={key:1},it={class:"actions"},at={key:0,class:"action-buttons-row"},dt=P({__name:"FeedEntryToolbar",props:{entry:{},dataType:{},syncContentLoading:{type:Boolean},isPhone:{type:Boolean}},emits:["viewFeed","addToTags","syncContent","saveToNotes","print","decreaseFontSize","increaseFontSize","resetFontSize","close"],setup(f){return(e,t)=>{var y,g,F;const n=ue,o=et,m=ce,c=K("tooltip");return s(),d("div",tt,[v("div",nt,[v("div",ot,[e.entry.feed?(s(),d("a",{key:0,onClick:t[0]||(t[0]=z(i=>e.$emit("viewFeed",e.entry.feed),["stop","prevent"]))},S(e.entry.feed.name),1)):q("",!0),e.entry?$((s(),d("time",st,[L(S(p(ve)(e.entry.publishedAt)),1)])),[[c,p(me)(e.entry.publishedAt)]]):q("",!0),l(n,{tags:(y=e.entry)==null?void 0:y.tags,type:e.dataType},null,8,["tags","type"]),e.isPhone?q("",!0):(s(),Q(o,{key:2,"entry-url":(g=e.entry)==null?void 0:g.url,"sync-content-loading":e.syncContentLoading,onAddToTags:t[1]||(t[1]=i=>e.$emit("addToTags")),onSyncContent:t[2]||(t[2]=i=>e.$emit("syncContent")),onSaveToNotes:t[3]||(t[3]=i=>e.$emit("saveToNotes")),onPrint:t[4]||(t[4]=i=>e.$emit("print")),onDecreaseFontSize:t[5]||(t[5]=i=>e.$emit("decreaseFontSize")),onIncreaseFontSize:t[6]||(t[6]=i=>e.$emit("increaseFontSize")),onResetFontSize:t[7]||(t[7]=i=>e.$emit("resetFontSize"))},null,8,["entry-url","sync-content-loading"]))]),v("div",it,[$((s(),d("button",{class:"btn-icon",onClick:t[8]||(t[8]=z(i=>e.$emit("close"),["prevent"]))},[l(m)])),[[c,e.$t("close")]])])]),e.isPhone?(s(),d("div",at,[l(o,{"entry-url":(F=e.entry)==null?void 0:F.url,"sync-content-loading":e.syncContentLoading,onAddToTags:t[9]||(t[9]=i=>e.$emit("addToTags")),onSyncContent:t[10]||(t[10]=i=>e.$emit("syncContent")),onSaveToNotes:t[11]||(t[11]=i=>e.$emit("saveToNotes")),onPrint:t[12]||(t[12]=i=>e.$emit("print")),onDecreaseFontSize:t[13]||(t[13]=i=>e.$emit("decreaseFontSize")),onIncreaseFontSize:t[14]||(t[14]=i=>e.$emit("increaseFontSize")),onResetFontSize:t[15]||(t[15]=i=>e.$emit("resetFontSize"))},null,8,["entry-url","sync-content-loading"])])):q("",!0)])}}}),rt=E(dt,[["__scopeId","data-v-f6341699"]]),lt={class:"content"},mt={key:1},vt=["innerHTML"],k="FEED_ENTRY",ut=P({__name:"FeedEntryView",setup(f){const{t:e}=J(),t=ze("isPhone"),n=_e(),o=C(n.params.id),m=C(),c=C(""),y=C(),{app:g,urlTokenKey:F}=pe(ye()),{render:i}=Ne(g,F),{loading:M,fetch:b}=Te({handle:async(a,r)=>{r?I(e(r),"error"):(m.value=a.feedEntry,m.value?c.value=await i(a.feedEntry.content||a.feedEntry.description):c.value="")},document:we,variables:()=>({id:o.value})}),u=$e(),{viewFeed:V}=Me(u);function D(){const a=n.query.q;a?Y(u,`/feeds?q=${a}`):Y(u,"/feeds")}const{mutate:T,loading:_,onDone:O}=G({document:ke});O(()=>{I(e("saved"))}),fe({handle:(a,r)=>{r?I(e(r),"error"):a&&(y.value=a.tags)},document:Ce,variables:{type:k}});const Z=()=>{window.print()};function W(){var a,r;Se(be,{type:k,tags:y.value,item:{key:(a=m.value)==null?void 0:a.id,title:"",size:0},selected:(r=y.value)==null?void 0:r.filter(B=>{var w;return(w=m.value)==null?void 0:w.tags.some(U=>U.id===B.id)})})}const{mutate:X,loading:x,onDone:ee}=G({document:qe});ee(async a=>{const r=a.data;m.value=r.syncFeedContent,c.value=await i(r.syncFeedContent.content||r.syncFeedContent.description)});const te=()=>{X({id:o.value})},A=a=>{a.type===k&&b()},R=a=>{a.type===k&&b()};ge(()=>{h.on("item_tags_updated",R),h.on("items_tags_updated",A),b()}),Fe(()=>{h.off("item_tags_updated",R),h.off("items_tags_updated",A)});const ne=()=>{u.decreaseFeedEntryFontSize()},oe=()=>{u.increaseFeedEntryFontSize()},se=()=>{u.resetFeedEntryFontSize()};return(a,r)=>{var w;const B=Be;return s(),d("div",lt,[p(M)&&!m.value?(s(),Q(B,{key:0})):m.value?(s(),d("article",mt,[l(rt,{entry:m.value,"data-type":k,"sync-content-loading":p(x),"is-phone":p(t),onViewFeed:p(V),onAddToTags:W,onSyncContent:te,onSaveToNotes:r[0]||(r[0]=U=>p(T)({query:`ids:${o.value}`})),onPrint:Z,onDecreaseFontSize:ne,onIncreaseFontSize:oe,onResetFontSize:se,onClose:D},null,8,["entry","sync-content-loading","is-phone","onViewFeed"]),v("div",{class:"article-title",style:j({fontSize:p(u).feedEntryFontSize*1.5+"px"})},S((w=m.value)==null?void 0:w.title),5),v("div",{class:"md-container",style:j({fontSize:p(u).feedEntryFontSize+"px"}),innerHTML:c.value},null,12,vt)])):q("",!0)])}}}),$t=E(ut,[["__scopeId","data-v-82c0c41e"]]);export{$t as default};
