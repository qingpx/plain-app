import{d as H,w as y,ai as L,aj as C,c as T,o as V,B as b,R as I,bZ as B,aH as S,L as W}from"./index-DK2k7uUz.js";const d=8,E=120,N=80,O=".v-dropdown-menu.is-open",$=H({__name:"VDropdownMenu",props:{modelValue:{type:Boolean,default:!1},anchor:{type:String,required:!0}},emits:["update:modelValue"],setup(u,{emit:M}){const n=u,_=M;let o=null;const r=()=>document.querySelector(O),p=()=>_("update:modelValue",!1),x=t=>{if(!(o!=null&&o.contains(t.target))){const e=r();return!(e!=null&&e.contains(t.target))}return!1},f=t=>{if(!o||!t)return;const e=o.getBoundingClientRect();if(e.width===0&&e.height===0){setTimeout(()=>f(t),10);return}const{innerWidth:k,innerHeight:g}=window,s=window.scrollY||document.documentElement.scrollTop,a=window.scrollX||document.documentElement.scrollLeft,w=t.offsetWidth||E,v=t.offsetHeight||N;let i=e.bottom+s+d,c=e.left+a;c+w>k&&(c=e.right+a-w),c=Math.max(a+d,c),i+v>g+s&&(i=e.top+s-v-d,i<s&&(i=s+d,t.style.maxHeight=`${g-16}px`,t.style.overflowY="auto")),t.style.top=`${Math.max(0,i)}px`,t.style.left=`${Math.max(0,c)}px`,t.style.opacity="1",t.style.visibility="visible"},l=t=>{x(t)&&p()},m=t=>{const{detail:e}=t;n.modelValue&&(!(e!=null&&e.exclude)||e.exclude!==o)&&p()},h=async()=>{o=document.getElementById(n.anchor),o&&(await S(),setTimeout(()=>{const t=r();t&&f(t)},10))};return y(()=>n.modelValue,t=>{if(t)h();else{const e=r();e&&(e.style.opacity="0",e.style.visibility="hidden")}}),y(()=>n.anchor,(t,e)=>{n.modelValue&&t!==e&&h()}),L(()=>{document.addEventListener("click",l),document.addEventListener("click",l,{capture:!0}),document.addEventListener("dropdown-toggle",m)}),C(()=>{document.removeEventListener("click",l),document.removeEventListener("click",l,{capture:!0}),document.removeEventListener("dropdown-toggle",m)}),(t,e)=>(V(),T("div",{class:I(["v-dropdown-menu",{"is-open":u.modelValue}]),onClick:e[0]||(e[0]=b(()=>{},["stop"]))},[B(t.$slots,"default",{},void 0,!0)],2))}}),R=W($,[["__scopeId","data-v-7a0835bb"]]);export{R as _};
