import{_ as $}from"./LeftSidebar.vuevuetypescriptsetuptruelang-8PDauG7U.js";import{_ as q}from"./TagFilter.vuevuetypescriptsetuptruelang-GKrkX5jn.js";import{d as I,e as L,s as M,f as Q,W as R,r as m,Y as V,w as A,ai as E,a7 as h,aj as j,M as x,o as i,x as v,aa as g,a8 as z,a9 as D,bF as F,a as s,j as G,B as y,R as S,c as T,h as k,t as a,k as l,J as H,E as J,D as B,F as O}from"./index-DZ3IxO2v.js";import"./VDropdownMenu-DjherD9y.js";import"./more-vert-DoEHTEtM.js";const P={class:"nav"},U={class:"title"},W={key:0,class:"count"},Y={class:"title"},K={key:0,class:"count"},oe=I({__name:"NotesSidebar",setup(X){const u=L(),{counter:t}=M(Q()),{parseQ:C}=D(),o=R({tagIds:[]}),n=m(!1),c=m(""),{fetch:d}=V({handle:e=>{e&&(t.value.notes=e.total,t.value.notesTrash=e.trash)},document:F,variables:()=>({})});function _(){var r;const e=g.currentRoute.value,f=z(((r=e.query.q)==null?void 0:r.toString())??"");C(o,f),c.value=o.tagIds.length===1?o.tagIds[0]:"",n.value=o.trash??!1,n.value&&(c.value=""),d()}_(),A(()=>g.currentRoute.value,()=>{_()});function b(){const e=J([{name:"trash",op:"",value:"true"}]);B(u,`/notes?q=${O(e)}`)}function w(){B(u,"/notes")}const p=()=>{d()};return E(()=>{h.on("notes_actioned",p)}),j(()=>{h.off("notes_actioned",p)}),(e,f)=>{const r=q,N=$;return i(),x(N,null,{title:v(()=>[H(a(e.$t("page_title.notes")),1)]),body:v(()=>[s("ul",P,[s("li",{class:S({active:!c.value&&!n.value}),onClick:y(w,["prevent"])},[s("span",U,a(e.$t("all")),1),l(t).notes>=0?(i(),T("span",W,a(l(t).notes.toLocaleString()),1)):k("",!0)],2),s("li",{class:S({active:n.value}),onClick:y(b,["prevent"])},[s("span",Y,a(e.$t("trash")),1),l(t).notesTrash>=0?(i(),T("span",K,a(l(t).notesTrash.toLocaleString()),1)):k("",!0)],2)]),G(r,{type:"NOTE",selected:c.value},null,8,["selected"])]),_:1})}}});export{oe as default};
