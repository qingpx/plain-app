import{_ as te}from"./LeftSidebar.vuevuetypescriptsetuptruelang-8PDauG7U.js";import{_ as se}from"./TagFilter.vuevuetypescriptsetuptruelang-GKrkX5jn.js";import{m as F,c as r,o,a as n,d as U,u as ae,e as j,r as T,aD as B,b4 as oe,g as ne,bk as le,H as ie,ai as G,a7 as S,aj as N,O as x,J as re,t as h,P as z,M as q,I as P,B as A,x as V,bl as ce,au as ue,a0 as R,a1 as de,R as O,k as $,f as L,s as _e,W as pe,X as i,Y as me,w as ve,aa as H,a8 as he,a9 as fe,j as k,h as M,aW as ye,aX as ge,E as ke,D as Q,F as Te}from"./index-DZ3IxO2v.js";import{_ as qe}from"./layout-grid-DEZ3PpFD.js";const $e={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function be(c,e){return o(),r("svg",$e,e[0]||(e[0]=[n("path",{fill:"currentColor",d:"m12 10.775l-3.9 3.9q-.275.275-.7.275t-.7-.275t-.275-.7t.275-.7l4.6-4.6q.15-.15.325-.213T12 8.4t.375.063t.325.212l4.6 4.6q.275.275.275.7t-.275.7t-.7.275t-.7-.275z"},null,-1)]))}const Ie=F({name:"material-symbols-expand-less-rounded",render:be}),Ce={class:"section-title"},we={class:"nav"},Be=["onClick"],Se={class:"title"},Ae={class:"count"},De=U({__name:"BucketFilter",props:{type:{type:String,required:!0},selected:{type:String,required:!0}},setup(c){const e=c,{t:b}=ae(),s=j(),I=T([]),f=B(()=>{var a;return!!((a=s.bucketFilterCollapsed)!=null&&a[e.type])});function v(){s.bucketFilterCollapsed[e.type]=!f.value}const g=B(()=>[...I.value??[]].sort((a,_)=>(a.name??"").localeCompare(_.name??"",void 0,{numeric:!0,sensitivity:"base"}))),{view:y}=oe(e.type),{refetch:u}=ne({handle:(a,_)=>{_?ie(b(_),"error"):a&&(I.value=a.mediaBuckets)},document:le,variables:{type:e.type}}),d=a=>{a.type===e.type&&u()};return G(()=>{S.on("media_items_actioned",d)}),N(()=>{S.off("media_items_actioned",d)}),(a,_)=>{const C=ce,w=Ie,D=P,E=z("tooltip");return o(),r(R,null,[n("div",Ce,[re(h(a.$t("folders"))+" ",1),x((o(),q(D,{onClick:A(v,["prevent"])},{default:V(()=>[f.value?(o(),q(C,{key:0})):(o(),q(w,{key:1}))]),_:1})),[[E,f.value?a.$t("expand_all"):a.$t("collapse_all")]])]),x(n("ul",we,[(o(!0),r(R,null,de(g.value,p=>(o(),r("li",{key:p.id,class:O({active:c.selected&&p.id===c.selected}),onClick:A(t=>$(y)($(s),p.id),["prevent"])},[n("span",Se,h(p.name),1),n("span",Ae,h(p.itemCount.toLocaleString()),1)],10,Be))),128))],512),[[ue,!f.value]])],64)}}}),Ee={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Me(c,e){return o(),r("svg",Ee,e[0]||(e[0]=[n("path",{fill:"currentColor",d:"M11.95 18q.525 0 .888-.363t.362-.887t-.362-.888t-.888-.362t-.887.363t-.363.887t.363.888t.887.362m.05 4q-2.075 0-3.9-.788t-3.175-2.137T2.788 15.9T2 12t.788-3.9t2.137-3.175T8.1 2.788T12 2t3.9.788t3.175 2.137T21.213 8.1T22 12t-.788 3.9t-2.137 3.175t-3.175 2.138T12 22m0-2q3.35 0 5.675-2.325T20 12t-2.325-5.675T12 4T6.325 6.325T4 12t2.325 5.675T12 20m.1-12.3q.625 0 1.088.4t.462 1q0 .55-.337.975t-.763.8q-.575.5-1.012 1.1t-.438 1.35q0 .35.263.588t.612.237q.375 0 .638-.25t.337-.625q.1-.525.45-.937t.75-.788q.575-.55.988-1.2t.412-1.45q0-1.275-1.037-2.087T12.1 6q-.95 0-1.812.4T8.975 7.625q-.175.3-.112.638t.337.512q.35.2.725.125t.625-.425q.275-.375.688-.575t.862-.2"},null,-1)]))}const xe=F({name:"material-symbols-help-outline-rounded",render:Me}),Ve={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Oe(c,e){return o(),r("svg",Ve,e[0]||(e[0]=[n("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 6h18m-2 0v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6m3 0V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"},null,-1)]))}const Fe=F({name:"lucide-trash",render:Oe}),Re={class:"nav"},Le={class:"icon","aria-hidden":"true"},He={class:"title"},Qe={key:0,class:"count"},Ue={class:"icon","aria-hidden":"true"},je={class:"title"},Ge={key:0,class:"count"},Xe=U({__name:"MediaSidebar",props:{type:{type:String,required:!0},gql:{type:Object,required:!0}},setup(c){L();const e=c,b=j(),{counter:s,app:I}=_e(L()),{parseQ:f}=fe(),v=pe({tagIds:[]}),g=T(""),y=T(!1),u=T(""),d=T(""),a=B(()=>{var t,m,l;return e.type===i.IMAGE?((t=s.value)==null?void 0:t.images)??-1:e.type===i.VIDEO?((m=s.value)==null?void 0:m.videos)??-1:e.type===i.AUDIO?((l=s.value)==null?void 0:l.audios)??-1:-1}),_=B(()=>{var t,m,l;return e.type===i.IMAGE?((t=s.value)==null?void 0:t.imagesTrash)??-1:e.type===i.VIDEO?((m=s.value)==null?void 0:m.videosTrash)??-1:e.type===i.AUDIO?((l=s.value)==null?void 0:l.audiosTrash)??-1:-1}),{fetch:C}=me({handle:t=>{t&&(e.type===i.IMAGE?(s.value.images=t.total,s.value.imagesTrash=t.trash):e.type===i.VIDEO?(s.value.videos=t.total,s.value.videosTrash=t.trash):e.type===i.AUDIO&&(s.value.audios=t.total,s.value.audiosTrash=t.trash))},document:e.gql,variables:()=>({})});function w(){var l;const t=H.currentRoute.value;g.value=t.meta.group||"",C();const m=he(((l=t.query.q)==null?void 0:l.toString())??"");f(v,m),u.value=v.tagIds.length===1?v.tagIds[0]:"",y.value=v.trash??!1,d.value=v.bucketId??"",u.value&&d.value&&(u.value=""),y.value&&(d.value="",u.value="")}w(),ve(()=>H.currentRoute.value.fullPath,()=>{w()});function D(){const t=ke([{name:"trash",op:"",value:"true"}]);Q(b,`/${g.value}?q=${Te(t)}`)}function E(){Q(b,`/${g.value}`)}const p=t=>{t.type===e.type&&C()};return G(()=>{S.on("media_items_actioned",p)}),N(()=>{S.off("media_items_actioned",p)}),(t,m)=>{const l=qe,W=Fe,X=xe,J=P,Y=De,K=se,Z=te,ee=z("tooltip");return o(),q(Z,null,{body:V(()=>[n("ul",Re,[n("li",{class:O({active:!u.value&&!d.value&&!y.value}),onClick:A(E,["prevent"])},[n("span",Le,[k(l)]),n("span",He,h(t.$t("all")),1),a.value>=0?(o(),r("span",Qe,h(a.value.toLocaleString()),1)):M("",!0)],2),$(ye)($(ge).MEDIA_TRASH,$(I).osVersion)?(o(),r("li",{key:0,class:O({active:y.value}),onClick:A(D,["prevent"])},[n("span",Ue,[k(W)]),n("span",je,h(t.$t("trash")),1),x((o(),q(J,{class:"btn-help sm"},{default:V(()=>[k(X)]),_:1})),[[ee,t.$t("trash_tips")]]),_.value>=0?(o(),r("span",Ge,h(_.value.toLocaleString()),1)):M("",!0)],2)):M("",!0)]),k(Y,{type:e.type,selected:d.value},null,8,["type","selected"]),k(K,{type:e.type,selected:u.value},null,8,["type","selected"])]),_:1})}}});export{Xe as _};
