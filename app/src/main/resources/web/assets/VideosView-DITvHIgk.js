import{_ as Ht}from"./VPagination.vuevuetypescriptsetuptruelang-DBODymeT.js";import{_ as Nt,a as Ot,b as Qt,c as Kt}from"./ViewToggleButtons.vuevuetypescriptsetuptruelang-CcLU7tep.js";import{_ as Wt}from"./ListItemPhone.vuevuetypescriptsetuptruelang-CYRT3CJ2.js";import{d as be,u as st,c as p,o as s,a0 as C,O as c,P as we,k as e,M as d,I as nt,B as l,x as u,j as r,ac as at,aR as it,aS as z,ao as lt,aT as ee,aU as te,aV as dt,Q as rt,R as N,a as g,b6 as ye,aL as oe,t as _,q as he,ad as $e,T as ut,U as Zt,J as Ge,V as Ye,e as jt,s as Je,r as R,W as Xt,f as Gt,aq as xe,ar as Yt,X as Jt,aW as xt,aX as et,aY as eo,as as to,Y as oo,aZ as so,a_ as no,w as ao,Z as io,$ as lo,h as M,v as ro,al as uo,au as po,a1 as x,a2 as mo,aB as co,b7 as go,H as vo,b0 as fo,at as ko,b1 as _o,aA as yo,b2 as ho,a4 as $o,D as bo,a5 as wo,a6 as Co,b8 as tt,b4 as ot,a7 as B,a8 as Io,a9 as To}from"./index-D87Nr3Nw.js";import{_ as Fo}from"./FieldId.vuevuetypescriptsetuptruelang-DRoBQnQY.js";import{_ as pt}from"./VCheckbox-CrJS-AL3.js";import{_ as Eo}from"./AllCheckedAlert.vuevuetypescriptsetuptruelang-DdXAmHeh.js";import{_ as So,a as Vo}from"./upload-rounded-B_ESm6mv.js";import{_ as Do}from"./MediaKeyboardShortcuts.vuevuetypescriptsetuptruelang-CRN5GL3G.js";import{a as Ao}from"./tags-TXV4-Odd.js";import{u as Lo,a as Mo}from"./key-events-CGCvIZ4E.js";const Bo={class:"actions"},Ro=be({__name:"VideoActionButtons",props:{item:{},filter:{},dataType:{},app:{},deleteItem:{type:Function},restore:{type:Function},downloadFile:{type:Function},trash:{type:Function},addItemToTags:{type:Function},restoreLoading:{type:Function},trashLoading:{type:Function}},setup(Ce){const{t}=st();return(a,v)=>{const $=at,I=nt,P=it,b=lt,H=dt,F=rt,m=we("tooltip");return s(),p("div",Bo,[a.filter.trash?(s(),p(C,{key:0},[c((s(),d(I,{class:"sm",onClick:v[0]||(v[0]=l(E=>a.deleteItem(a.dataType,a.item),["stop"]))},{default:u(()=>[r($)]),_:1})),[[m,e(t)("delete")]]),c((s(),d(I,{class:"sm",loading:a.restoreLoading(`ids:${a.item.id}`),onClick:v[1]||(v[1]=l(E=>a.restore(a.dataType,`ids:${a.item.id}`),["stop"]))},{default:u(()=>[r(P)]),_:1},8,["loading"])),[[m,e(t)("restore")]]),c((s(),d(I,{class:"sm",onClick:v[2]||(v[2]=l(E=>a.downloadFile(a.item.path,e(z)(a.item.path).replace(" ","-")),["stop"]))},{default:u(()=>[r(b)]),_:1})),[[m,e(t)("download")]])],64)):(s(),p(C,{key:1},[e(ee)(e(te).MEDIA_TRASH,a.app.osVersion)?c((s(),d(I,{key:0,class:"sm",loading:a.trashLoading(`ids:${a.item.id}`),onClick:v[3]||(v[3]=l(E=>a.trash(a.dataType,`ids:${a.item.id}`),["stop"]))},{default:u(()=>[r(H)]),_:1},8,["loading"])),[[m,e(t)("move_to_trash")]]):c((s(),d(I,{key:1,class:"sm",onClick:v[4]||(v[4]=l(E=>a.deleteItem(a.dataType,a.item),["stop"]))},{default:u(()=>[r($)]),_:1})),[[m,e(t)("delete")]]),c((s(),d(I,{class:"sm",onClick:v[5]||(v[5]=l(E=>a.downloadFile(a.item.path,e(z)(a.item.path).replace(" ","-")),["stop"]))},{default:u(()=>[r(b)]),_:1})),[[m,e(t)("download")]]),c((s(),d(I,{class:"sm",onClick:v[6]||(v[6]=l(E=>a.addItemToTags(a.item),["stop"]))},{default:u(()=>[r(F)]),_:1})),[[m,e(t)("add_to_tags")]])],64))])}}}),Uo={class:"start"},qo={class:"number"},zo={class:"image"},Po=["src"],Ho=["src"],No={class:"title"},Oo={class:"subtitle"},Qo={class:"time"},Ko={class:"image"},Wo=["src"],Zo=["src"],jo={class:"subtitle"},Xo={class:"subtitle"},Go=be({__name:"VideoListItem",props:{item:{},index:{},selectedIds:{},shiftEffectingIds:{},shouldSelect:{type:Boolean},isPhone:{type:Boolean},imageErrorIds:{},bucketsMap:{},filter:{},dataType:{},mainStore:{},app:{},handleItemClick:{type:Function},handleMouseOver:{type:Function},toggleSelect:{type:Function},onImageError:{type:Function},viewBucket:{type:Function},deleteItem:{type:Function},restore:{type:Function},downloadFile:{type:Function},trash:{type:Function},addItemToTags:{type:Function},view:{type:Function},restoreLoading:{type:Function},trashLoading:{type:Function}},setup(Ce){return(t,a)=>{var F;const v=pt,$=Fo,I=ut,P=Ro,b=Wt,H=we("tooltip");return t.isPhone?(s(),d(b,{key:1,"is-selected":t.selectedIds.includes(t.item.id),"is-selecting":t.shiftEffectingIds.includes(t.item.id),"checkbox-checked":t.shiftEffectingIds.includes(t.item.id)?t.shouldSelect:t.selectedIds.includes(t.item.id),onClick:a[8]||(a[8]=m=>t.handleItemClick(m,t.item,t.index,()=>t.view(t.index))),onMouseenter:a[9]||(a[9]=l(m=>t.handleMouseOver(m,t.index),["stop"])),onCheckboxClick:a[10]||(a[10]=m=>t.toggleSelect(m,t.item,t.index))},{image:u(()=>[g("div",Ko,[t.imageErrorIds.includes(t.item.id)?(s(),p("img",{key:0,src:`/ficons/${e(ye)(t.item.path)}.svg`,class:"svg"},null,8,Wo)):(s(),p("img",{key:1,class:"image-thumb",src:e(oe)(t.item.fileId,"&w=200&h=200"),onError:a[6]||(a[6]=m=>t.onImageError(t.item.id))},null,40,Zo))])]),title:u(()=>[Ge(_(e(z)(t.item.path)),1)]),subtitle:u(()=>{var m;return[g("div",jo,[g("span",null,_(e(he)(t.item.size)),1),g("span",null,_(e($e)(t.item.duration)),1),g("a",{onClick:a[7]||(a[7]=l(E=>t.viewBucket(t.mainStore,t.item.bucketId),["stop","prevent"]))},_((m=t.bucketsMap[t.item.bucketId])==null?void 0:m.name),1),r(I,{tags:t.item.tags,type:t.dataType,"only-links":!0},null,8,["tags","type"])]),g("div",Xo,_(e(Ye)(t.item.createdAt)),1)]}),actions:u(()=>[r(P,{item:t.item,filter:t.filter,"data-type":t.dataType,app:t.app,"delete-item":t.deleteItem,restore:t.restore,"download-file":t.downloadFile,trash:t.trash,"add-item-to-tags":t.addItemToTags,"restore-loading":t.restoreLoading,"trash-loading":t.trashLoading},null,8,["item","filter","data-type","app","delete-item","restore","download-file","trash","add-item-to-tags","restore-loading","trash-loading"])]),_:1},8,["is-selected","is-selecting","checkbox-checked"])):(s(),p("section",{key:0,class:N(["media-item selectable-card",{selected:t.selectedIds.includes(t.item.id),selecting:t.shiftEffectingIds.includes(t.item.id)}]),onClick:a[4]||(a[4]=l(m=>t.handleItemClick(m,t.item,t.index,()=>t.view(t.index)),["stop"])),onMouseenter:a[5]||(a[5]=l(m=>t.handleMouseOver(m,t.index),["stop"]))},[g("div",Uo,[t.shiftEffectingIds.includes(t.item.id)?(s(),d(v,{key:0,class:"checkbox","touch-target":"wrapper",checked:t.shouldSelect,onClick:a[0]||(a[0]=l(m=>t.toggleSelect(m,t.item,t.index),["stop"]))},null,8,["checked"])):(s(),d(v,{key:1,class:"checkbox","touch-target":"wrapper",checked:t.selectedIds.includes(t.item.id),onClick:a[1]||(a[1]=l(m=>t.toggleSelect(m,t.item,t.index),["stop"]))},null,8,["checked"])),g("span",qo,[r($,{id:t.index+1,raw:t.item},null,8,["id","raw"])])]),g("div",zo,[t.imageErrorIds.includes(t.item.id)?(s(),p("img",{key:0,src:`/ficons/${e(ye)(t.item.path)}.svg`,class:"svg"},null,8,Po)):(s(),p("img",{key:1,class:"image-thumb",src:e(oe)(t.item.fileId,"&w=200&h=200"),onError:a[2]||(a[2]=m=>t.onImageError(t.item.id))},null,40,Ho))]),g("div",No,_(e(z)(t.item.path)),1),g("div",Oo,[g("span",null,_(e(he)(t.item.size)),1),g("span",null,_(e($e)(t.item.duration)),1),g("a",{onClick:a[3]||(a[3]=l(m=>t.viewBucket(t.mainStore,t.item.bucketId),["stop","prevent"]))},_((F=t.bucketsMap[t.item.bucketId])==null?void 0:F.name),1),r(I,{tags:t.item.tags,type:t.dataType,"only-links":!0},null,8,["tags","type"])]),r(P,{item:t.item,filter:t.filter,"data-type":t.dataType,app:t.app,"delete-item":t.deleteItem,restore:t.restore,"download-file":t.downloadFile,trash:t.trash,"add-item-to-tags":t.addItemToTags,"restore-loading":t.restoreLoading,"trash-loading":t.trashLoading},null,8,["item","filter","data-type","app","delete-item","restore","download-file","trash","add-item-to-tags","restore-loading","trash-loading"]),g("div",Qo,[c((s(),p("span",null,[Ge(_(e(Ye)(t.item.createdAt)),1)])),[[H,e(Zt)(t.item.createdAt)]])])],34))}}}),Yo={class:"top-app-bar"},Jo={class:"title"},xo={key:0},es={key:1},ts={key:0,class:"actions"},os=["onClick"],ss={key:0,class:"secondary-actions"},ns=["onClick","onMouseenter"],as=["src"],is=["src","onError"],ls={key:1,class:"actions"},ds={class:"right"},rs={key:2,class:"no-data-placeholder"},U=55,$s=be({__name:"VideosView",setup(Ce){const t=ro("isPhone"),a=jt(),{videoSortBy:v}=Je(a),$=R([]),{t:I}=st(),{parseQ:P}=To(),b=Xt({tagIds:[],bucketId:void 0}),H=Gt(),{app:F,urlTokenKey:m,uploads:E}=Je(H),W=R(!1),se=R(!1),{input:mt,upload:ct,uploadChanged:Ie}=xe(E),{input:gt,upload:vt,uploadChanged:Te}=xe(E),{dropping:ft,fileDragEnter:Fe,fileDragLeave:Ee,dropFiles:kt}=Yt(E),ne=R(!1),f=Jt.VIDEO,Z=$o(),j=R(1),{tags:ae,buckets:ie,fetch:_t}=xt(f),yt=et(()=>{const o={};return ie.value.forEach(i=>{o[i.id]=i}),o}),S=R(""),{addToTags:ht}=Ao(f,ae),{deleteItems:le,deleteItem:de}=eo(),{view:$t}=ho(f),{selectedIds:w,allChecked:Se,realAllChecked:A,selectRealAll:bt,allCheckedAlertVisible:wt,clearSelection:O,toggleAllChecked:Ct,toggleSelect:X,total:V,checked:q,shiftEffectingIds:re,handleItemClick:Ve,handleMouseOver:De,selectAll:It,shouldSelect:Ae}=Lo($),{downloadItems:Le}=to(m,f,O,()=>co("videos")),{downloadFile:ue}=yo(m),Me=o=>{const i=Z.query.q;bo(a,i?`/videos?page=${o}&q=${i}`:`/videos?page=${o}`)},{keyDown:Be,keyUp:Re}=Mo(V,U,j,It,O,Me,()=>{ee(te.MEDIA_TRASH,F.value.osVersion)?Y(f,K()):le(f,w.value,A.value,V.value,S.value)}),pe=R([]),Tt=ko(),Ft=et(()=>$.value.map(o=>({src:oe(o.fileId),name:z(o.path),duration:o.duration,size:o.size,path:o.path,data:o,type:f}))),Ue=o=>{pe.value.push(o)},{loading:G,fetch:Q}=oo({handle:async(o,i)=>{if(ne.value=!1,i)vo(I(i),"error");else if(o){const T=[];for(const D of o.videos)T.push({...D,fileId:fo(m.value,D.path,D.id)});$.value=T,V.value=o.videoCount}},document:go,variables:()=>({offset:(j.value-1)*U,limit:U,query:S.value,sortBy:v.value})}),{trashLoading:me,trash:Y}=so(),{restoreLoading:ce,restore:ge}=no();function ve(o){H.lightbox={sources:Ft.value,index:o,visible:!0}}const K=()=>{let o=S.value;return A.value||(o=`ids:${w.value.join(",")}`),o};function Et(o){v.value!==o&&(ne.value=!0,v.value=o)}function qe(o){wo(Co,{type:f,tags:ae.value,item:{key:o.id,title:o.title,size:o.size},selected:ae.value.filter(i=>o.tags.some(T=>T.id===i.id))})}function fe(){const o=ie.value.find(i=>i.id===b.bucketId);return o?ot(o.topItems[0]):`${F.value.internalStoragePath}/Movies`}function St(){ct(fe())}function Vt(){vt(fe())}function Dt(o){kt(o,fe(),i=>tt(i.name))}const ze=o=>{o.type===f&&(O(),Q())},Pe=o=>{o.type===f&&Q()},He=o=>{o.type===f&&(O(),Q())},Ne=o=>{o.status==="done"&&tt(o.fileName)&&((!b.bucketId||ie.value.some(T=>T.id===b.bucketId&&T.topItems.some(D=>o.dir.startsWith(ot(D)))))&&setTimeout(()=>{Q()},1e3),B.emit("media_items_actioned",{type:f,action:"upload",query:""}))},ke=R(!1);function Oe(){var i,T;const o=parseInt(((i=Z.query.page)==null?void 0:i.toString())??"1");j.value=Number.isFinite(o)&&o>0?o:1,S.value=Io(((T=Z.query.q)==null?void 0:T.toString())??""),P(b,S.value),Q()}return ao(()=>Z.fullPath,()=>{ke.value&&Oe()}),io(()=>{_t(),ke.value=!0,Oe(),B.on("item_tags_updated",Pe),B.on("items_tags_updated",ze),B.on("media_items_actioned",He),B.on("upload_task_done",Ne),window.addEventListener("keydown",Be),window.addEventListener("keyup",Re)}),lo(()=>{ke.value=!1,B.off("item_tags_updated",Pe),B.off("items_tags_updated",ze),B.off("media_items_actioned",He),B.off("upload_task_done",Ne),window.removeEventListener("keydown",Be),window.removeEventListener("keyup",Re)}),(o,i)=>{const T=pt,D=at,k=nt,Qe=it,J=lt,Ke=dt,We=rt,At=Do,Lt=So,Ze=uo,Mt=Vo,je=Nt,Bt=Eo,_e=Qt,Xe=Kt,Rt=_o,Ut=ut,qt=Go,zt=Ot,Pt=Ht,h=we("tooltip");return s(),p(C,null,[g("div",Yo,[r(T,{"touch-target":"wrapper",checked:e(Se),indeterminate:!e(Se)&&e(q),onChange:e(Ct)},null,8,["checked","indeterminate","onChange"]),g("div",Jo,[e(w).length?(s(),p("span",xo,_(o.$t("x_selected",{count:e(A)?e(V).toLocaleString():e(w).length.toLocaleString()})),1)):(s(),p("span",es,_(o.$t("page_title.videos"))+" ("+_(e(V).toLocaleString())+")",1)),e(q)?(s(),p(C,{key:2},[b.trash?(s(),p(C,{key:0},[c((s(),d(k,{onClick:i[0]||(i[0]=l(n=>e(le)(e(f),e(w),e(A),e(V),S.value),["stop"]))},{default:u(()=>[r(D)]),_:1})),[[h,o.$t("delete")]]),c((s(),d(k,{loading:e(ce)(K()),onClick:i[1]||(i[1]=l(n=>e(ge)(e(f),K()),["stop"]))},{default:u(()=>[r(Qe)]),_:1},8,["loading"])),[[h,o.$t("restore")]]),c((s(),d(k,{onClick:i[2]||(i[2]=l(n=>e(Le)(e(A),e(w),S.value),["stop"]))},{default:u(()=>[r(J)]),_:1})),[[h,o.$t("download")]])],64)):(s(),p(C,{key:1},[e(ee)(e(te).MEDIA_TRASH,e(F).osVersion)?c((s(),d(k,{key:0,loading:e(me)(K()),onClick:i[3]||(i[3]=l(n=>e(Y)(e(f),K()),["stop"]))},{default:u(()=>[r(Ke)]),_:1},8,["loading"])),[[h,o.$t("move_to_trash")]]):c((s(),d(k,{key:1,onClick:i[4]||(i[4]=l(n=>e(le)(e(f),e(w),e(A),e(V),S.value),["stop"]))},{default:u(()=>[r(D)]),_:1})),[[h,o.$t("delete")]]),c((s(),d(k,{onClick:i[5]||(i[5]=l(n=>e(Le)(e(A),e(w),S.value),["stop"]))},{default:u(()=>[r(J)]),_:1})),[[h,o.$t("download")]]),c((s(),d(k,{onClick:i[6]||(i[6]=l(n=>e(ht)(e(w),e(A),S.value),["stop"]))},{default:u(()=>[r(We)]),_:1})),[[h,o.$t("add_to_tags")]])],64))],64)):M("",!0)]),!e(t)||!e(q)?(s(),p("div",ts,[r(At),b.trash?M("",!0):(s(),d(Ze,{key:0,modelValue:W.value,"onUpdate:modelValue":i[9]||(i[9]=n=>W.value=n)},{trigger:u(()=>[c((s(),d(k,null,{default:u(()=>[r(Lt)]),_:1})),[[h,o.$t("upload")]])]),default:u(()=>[g("div",{class:"dropdown-item",onClick:i[7]||(i[7]=l(n=>{St(),W.value=!1},["stop"]))},_(o.$t("upload_files")),1),g("div",{class:"dropdown-item",onClick:i[8]||(i[8]=l(n=>{Vt(),W.value=!1},["stop"]))},_(o.$t("upload_folder")),1)]),_:1},8,["modelValue"])),r(Ze,{modelValue:se.value,"onUpdate:modelValue":i[10]||(i[10]=n=>se.value=n)},{trigger:u(()=>[c((s(),d(k,{loading:ne.value},{default:u(()=>[r(Mt)]),_:1},8,["loading"])),[[h,o.$t("sort")]])]),default:u(()=>[(s(!0),p(C,null,x(e(Tt),n=>(s(),p("div",{key:n.value,class:N(["dropdown-item",{selected:n.value===e(v)}]),onClick:L=>{Et(n.value),se.value=!1}},_(o.$t(n.label)),11,os))),128))]),_:1},8,["modelValue"]),e(t)?M("",!0):(s(),d(je,{key:1,"card-view":e(a).videosCardView,"onUpdate:cardView":i[11]||(i[11]=n=>e(a).videosCardView=n)},null,8,["card-view"]))])):M("",!0)]),e(t)&&!e(q)?(s(),p("div",ss,[r(je,{"card-view":e(a).videosCardView,"onUpdate:cardView":i[12]||(i[12]=n=>e(a).videosCardView=n)},null,8,["card-view"])])):M("",!0),r(Bt,{limit:U,total:e(V),"all-checked-alert-visible":e(wt),"real-all-checked":e(A),"select-real-all":e(bt),"clear-selection":e(O)},null,8,["total","all-checked-alert-visible","real-all-checked","select-real-all","clear-selection"]),g("div",{class:"scroll-content",onDragover:i[16]||(i[16]=l((...n)=>e(Fe)&&e(Fe)(...n),["stop","prevent"]))},[c(g("div",{class:"drag-mask",onDrop:l(Dt,["stop","prevent"]),onDragleave:i[13]||(i[13]=l((...n)=>e(Ee)&&e(Ee)(...n),["stop","prevent"]))},_(o.$t("release_to_send_files")),545),[[po,e(ft)]]),e(a).videosCardView?(s(),p("div",{key:1,class:N(["main-list media-list",{"select-mode":e(q)}])},[(s(!0),p(C,null,x($.value,(n,L)=>(s(),d(qt,{key:n.id,item:n,index:L,"is-phone":e(t),"selected-ids":e(w),"shift-effecting-ids":e(re),"should-select":e(Ae),"image-error-ids":pe.value,"buckets-map":yt.value,filter:b,"data-type":e(f),"main-store":e(a),app:e(F),"handle-item-click":e(Ve),"handle-mouse-over":e(De),"toggle-select":e(X),"on-image-error":Ue,"view-bucket":e($t),"delete-item":e(de),restore:e(ge),"download-file":e(ue),trash:e(Y),"add-item-to-tags":qe,view:ve,"restore-loading":e(ce),"trash-loading":e(me)},null,8,["item","index","is-phone","selected-ids","shift-effecting-ids","should-select","image-error-ids","buckets-map","filter","data-type","main-store","app","handle-item-click","handle-mouse-over","toggle-select","view-bucket","delete-item","restore","download-file","trash","restore-loading","trash-loading"]))),128)),e(G)&&$.value.length===0?(s(),d(zt,{key:0,limit:U,"is-phone":e(t)},null,8,["is-phone"])):M("",!0)],2)):(s(),p("div",{key:0,class:N(["media-grid",{"select-mode":e(q)}])},[(s(!0),p(C,null,x($.value,(n,L)=>(s(),p("section",{key:n.id,class:N(["media-item",{selected:e(w).includes(n.id),selecting:e(re).includes(n.id)}]),onClick:l(y=>e(Ve)(y,n,L,ve),["stop"]),onMouseenter:l(y=>e(De)(y,L),["stop"])},[pe.value.includes(n.id)?(s(),p("img",{key:0,src:`/ficons/${e(ye)(n.path)}.svg`,class:"image svg"},null,8,as)):(s(),p("img",{key:1,class:"image image-thumb",src:e(oe)(n.fileId,"&w=200&h=200"),onError:y=>Ue(n.id)},null,40,is)),e(re).includes(n.id)?(s(),d(k,{key:2,class:"btn-checkbox",onClick:l(y=>e(X)(y,n,L),["stop"])},{default:u(()=>[e(Ae)?(s(),d(_e,{key:0})):(s(),d(Xe,{key:1}))]),_:2},1032,["onClick"])):e(w).includes(n.id)?(s(),d(k,{key:3,class:"btn-checkbox",onClick:l(y=>e(X)(y,n,L),["stop"])},{default:u(()=>[r(_e)]),_:2},1032,["onClick"])):(s(),p(C,{key:4},[r(k,{class:"btn-checkbox",onClick:l(y=>e(X)(y,n,L),["stop"])},{default:u(()=>[e(w).includes(n.id)?(s(),d(_e,{key:0})):(s(),d(Xe,{key:1}))]),_:2},1032,["onClick"]),e(q)?c((s(),d(k,{key:0,class:"btn-zoom sm",onClick:l(y=>ve(L),["stop"])},{default:u(()=>[r(Rt)]),_:2},1032,["onClick"])),[[h,o.$t("open")]]):(s(),p("div",ls,[b.trash?(s(),p(C,{key:0},[c((s(),d(k,{class:"sm",onClick:l(y=>e(de)(e(f),n),["stop"])},{default:u(()=>[r(D)]),_:2},1032,["onClick"])),[[h,o.$t("delete")]]),c((s(),d(k,{class:"sm",loading:e(ce)(`ids:${n.id}`),onClick:l(y=>e(ge)(e(f),`ids:${n.id}`),["stop"])},{default:u(()=>[r(Qe)]),_:2},1032,["loading","onClick"])),[[h,o.$t("restore")]]),c((s(),d(k,{class:"sm",onClick:l(y=>e(ue)(n.path,e(z)(n.path).replace(" ","-")),["stop"])},{default:u(()=>[r(J)]),_:2},1032,["onClick"])),[[h,o.$t("download")]])],64)):(s(),p(C,{key:1},[e(ee)(e(te).MEDIA_TRASH,e(F).osVersion)?c((s(),d(k,{key:0,class:"sm",loading:e(me)(`ids:${n.id}`),onClick:l(y=>e(Y)(e(f),`ids:${n.id}`),["stop"])},{default:u(()=>[r(Ke)]),_:2},1032,["loading","onClick"])),[[h,o.$t("move_to_trash")]]):c((s(),d(k,{key:1,class:"sm",onClick:l(y=>e(de)(e(f),n),["stop"])},{default:u(()=>[r(D)]),_:2},1032,["onClick"])),[[h,o.$t("delete")]]),c((s(),d(k,{class:"sm",onClick:l(y=>e(ue)(n.path,e(z)(n.path).replace(" ","-")),["stop"])},{default:u(()=>[r(J)]),_:2},1032,["onClick"])),[[h,o.$t("download")]]),c((s(),d(k,{class:"sm",onClick:l(y=>qe(n),["stop"])},{default:u(()=>[r(We)]),_:2},1032,["onClick"])),[[h,o.$t("add_to_tags")]])],64))])),g("div",{class:N(["info",{"has-tags":n.tags.length>0}])},[r(Ut,{tags:n.tags,type:e(f)},null,8,["tags","type"]),g("span",ds,_(["SIZE_ASC","SIZE_DESC"].includes(e(v))?e(he)(n.size):e($e)(n.duration)),1)],2)],64))],42,ns))),128)),e(G)&&$.value.length===0?(s(),p(C,{key:0},x(U,n=>g("section",{key:n,class:"skeleton-image media-item"})),64)):M("",!0)],2)),!e(G)&&$.value.length===0?(s(),p("div",rs,_(o.$t(e(mo)(e(G),e(F).permissions,"WRITE_EXTERNAL_STORAGE"))),1)):M("",!0),e(V)>U?(s(),d(Pt,{key:3,page:j.value,go:Me,total:e(V),limit:U},null,8,["page","total"])):M("",!0),g("input",{ref_key:"fileInput",ref:mt,style:{display:"none"},type:"file",accept:"video/*",multiple:"",onChange:i[14]||(i[14]=(...n)=>e(Ie)&&e(Ie)(...n))},null,544),g("input",{ref_key:"dirFileInput",ref:gt,style:{display:"none"},type:"file",accept:"video/*",multiple:"",webkitdirectory:"",mozdirectory:"",directory:"",onChange:i[15]||(i[15]=(...n)=>e(Te)&&e(Te)(...n))},null,544)],32)],64)}}});export{$s as default};
