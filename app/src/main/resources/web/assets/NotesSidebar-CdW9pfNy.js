import{_ as N}from"./LeftSidebar.vuevuetypescriptsetuptruelang-VHUzKMSK.js";import{_ as $}from"./TagFilter.vuevuetypescriptsetuptruelang-DK5uZnv1.js";import{e as I,f as L,s as Q,g as V,T as z,r as m,W as A,w as M,ae as R,a5 as h,af as x,K as D,o as i,q as v,a6 as g,a4 as E,bx as H,a as s,k as O,z as T,O as y,c as S,j as k,t as a,l,H as j,C as G,B as C,D as K}from"./index-CHzD12Eh.js";import{u as P}from"./search-BS0At8Rs.js";import"./VDropdownMenu-nAAHmswh.js";import"./more-vert-Cihez65j.js";const U={class:"nav"},W={class:"title"},F={key:0,class:"count"},J={class:"title"},X={key:0,class:"count"},ne=I({__name:"NotesSidebar",setup(Y){const u=L(),{counter:t}=Q(V()),{parseQ:B}=P(),o=z({tagIds:[]}),n=m(!1),r=m(""),{fetch:d}=A({handle:e=>{e&&(t.value.notes=e.total,t.value.notesTrash=e.trash)},document:H,variables:()=>({})});function _(){var c;const e=g.currentRoute.value,p=E(((c=e.query.q)==null?void 0:c.toString())??"");B(o,p),r.value=o.tagIds.length===1?o.tagIds[0]:"",n.value=o.trash??!1,n.value&&(r.value=""),d()}_(),M(()=>g.currentRoute.value,()=>{_()});function b(){const e=G([{name:"trash",op:"",value:"true"}]);C(u,`/notes?q=${K(e)}`)}function q(){C(u,"/notes")}const f=()=>{d()};return R(()=>{h.on("notes_actioned",f)}),x(()=>{h.off("notes_actioned",f)}),(e,p)=>{const c=$,w=N;return i(),D(w,null,{title:v(()=>[j(a(e.$t("page_title.notes")),1)]),body:v(()=>[s("ul",U,[s("li",{class:y({active:!r.value&&!n.value}),onClick:T(q,["prevent"])},[s("span",W,a(e.$t("all")),1),l(t).notes>=0?(i(),S("span",F,a(l(t).notes.toLocaleString()),1)):k("",!0)],2),s("li",{class:y({active:n.value}),onClick:T(b,["prevent"])},[s("span",J,a(e.$t("trash")),1),l(t).notesTrash>=0?(i(),S("span",X,a(l(t).notesTrash.toLocaleString()),1)):k("",!0)],2)]),O(c,{type:"NOTE",selected:r.value},null,8,["selected"])]),_:1})}}});export{ne as default};
