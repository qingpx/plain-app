import{_ as I}from"./LeftSidebar.vuevuetypescriptsetuptruelang-CYfYOn6B.js";import{_ as N}from"./TagFilter.vuevuetypescriptsetuptruelang-CY0Ta0FA.js";import{d as Q,e as R,s as V,f as A,W as D,r as p,Y as j,w as x,ai as z,a7 as h,aj as E,M as F,o as u,x as C,aa as k,a8 as G,a9 as H,ak as J,a,j as P,c as _,B as S,R as B,h as $,t as s,k as L,a1 as U,a0 as W,J as Y,E as K,D as w,F as O}from"./index-DK2k7uUz.js";import"./VDropdownMenu-Bk56u6g5.js";import"./more-vert-YGlKv2Td.js";const X={class:"nav"},Z={class:"title"},ee={key:0,class:"count"},te=["onClick"],ae={class:"title"},se={key:0,class:"count"},de=Q({__name:"CallsSidebar",setup(oe){const m=R(),{counter:d}=V(A()),{parseQ:T}=H(),o=D({tagIds:[]}),n=p(""),l=p(""),c=p(new Map),{fetch:v}=j({handle:e=>{e&&(d.value.calls=e.total,c.value.set("1",e.incoming),c.value.set("2",e.outgoing),c.value.set("3",e.missed))},document:J,variables:()=>({})});function f(e){return c.value.get(e)??-1}function y(){var i;const e=k.currentRoute.value,r=G(((i=e.query.q)==null?void 0:i.toString())??"");T(o,r),n.value=o.type??"",l.value=o.tagIds.length===1?o.tagIds[0]:"",n.value&&(l.value=""),v()}y(),x(()=>k.currentRoute.value,()=>{y()});function b(e){const r=K([{name:"type",op:"",value:e}]);w(m,`/calls?q=${O(r)}`)}function q(){w(m,"/calls")}const g=()=>{v()};return z(()=>{h.on("calls_deleted",g)}),E(()=>{h.off("calls_deleted",g)}),(e,r)=>{const i=N,M=I;return u(),F(M,null,{title:C(()=>[Y(s(e.$t("page_title.calls")),1)]),body:C(()=>[a("ul",X,[a("li",{class:B({active:!l.value&&!n.value}),onClick:S(q,["prevent"])},[a("span",Z,s(e.$t("all")),1),L(d).calls>=0?(u(),_("span",ee,s(L(d).calls.toLocaleString()),1)):$("",!0)],2),(u(),_(W,null,U(["1","2","3"],t=>a("li",{key:t,class:B({active:t===n.value}),onClick:S(ne=>b(t),["prevent"])},[a("span",ae,s(e.$t(`call_type.${t}`)),1),f(t)>=0?(u(),_("span",se,s(f(t).toLocaleString()),1)):$("",!0)],10,te)),64))]),P(i,{type:"CALL",selected:l.value},null,8,["selected"])]),_:1})}}});export{de as default};
