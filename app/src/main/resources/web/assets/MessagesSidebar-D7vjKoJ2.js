import{_ as L}from"./LeftSidebar.vuevuetypescriptsetuptruelang-DbEpnYs1.js";import{_ as M}from"./TagFilter.vuevuetypescriptsetuptruelang-CgHIUuPf.js";import{e as I,f as N,s as Q,g as V,T as z,r as m,W as R,w as x,K as A,o as u,q as g,a6 as y,a4 as D,a7 as j,a as t,k as E,c as _,z as h,O as C,j as S,t as a,l as k,$ as F,Z as G,H,C as K,B as $,D as O}from"./index-CvrCHKkA.js";import{u as P}from"./search-1vLN7k3W.js";import"./VDropdownMenu-CiRCvjti.js";import"./more-vert-BqhhPS58.js";const W={class:"nav"},Z={class:"title"},J={key:0,class:"count"},U=["onClick"],X={class:"title"},Y={key:0,class:"count"},le=I({__name:"MessagesSidebar",setup(ee){const d=N(),{counter:p}=Q(V()),{parseQ:B}=P(),o=z({tagIds:[]}),n=m(""),c=m(""),r=m(new Map),{fetch:T}=R({handle:e=>{e&&(p.value.messages=e.total,r.value.set("1",e.inbox),r.value.set("2",e.sent),r.value.set("3",e.drafts))},document:j,variables:()=>({})});function v(e){return r.value.get(e)??-1}function f(){var i;const e=y.currentRoute.value,l=D(((i=e.query.q)==null?void 0:i.toString())??"");B(o,l),n.value=o.type??"",c.value=o.tagIds.length===1?o.tagIds[0]:"",n.value&&(c.value=""),T()}f(),x(()=>y.currentRoute.value,()=>{f()});function b(e){const l=K([{name:"type",op:"",value:e}]);$(d,`/messages?q=${O(l)}`)}function q(){$(d,"/messages")}return(e,l)=>{const i=M,w=L;return u(),A(w,null,{title:g(()=>[H(a(e.$t("page_title.messages")),1)]),body:g(()=>[t("ul",W,[t("li",{class:C({active:!c.value&&!n.value}),onClick:h(q,["prevent"])},[t("span",Z,a(e.$t("all")),1),k(p).messages>=0?(u(),_("span",J,a(k(p).messages.toLocaleString()),1)):S("",!0)],2),(u(),_(G,null,F(["1","2","3"],s=>t("li",{key:s,class:C({active:s===n.value}),onClick:h(se=>b(s),["prevent"])},[t("span",X,a(e.$t(`message_type.${s}`)),1),v(s)>=0?(u(),_("span",Y,a(v(s).toLocaleString()),1)):S("",!0)],10,U)),64))]),E(i,{type:"SMS",selected:c.value},null,8,["selected"])]),_:1})}}});export{le as default};
